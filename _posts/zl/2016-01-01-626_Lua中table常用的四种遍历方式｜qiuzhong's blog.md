---
layout: post
title: Lua中table常用的四种遍历方式｜qiuzhong's blog 
tags: [lua文章]
categories: [topic]
---
<p>第一种遍历方式：<br/></p><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">for key, value in ipairs(table) do</span><br/><span class="line">	</span><br/><span class="line">end</span><br/></pre></td></tr></tbody></table></figure><p></p>
<p>注：这种方式的遍历只会从key为1的地方开始，一直以key递增1的顺序来遍历，若找到一个递增不是1的key就结束遍历，无论后面是否仍然是顺序的key。请看下面例子：</p>
<p>Sample_1:<br/></p><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">local tab1 = </span><br/><span class="line">{</span><br/><span class="line">	[1] = 1,</span><br/><span class="line">	[2] = 2,</span><br/><span class="line">	[3] = 3,</span><br/><span class="line">	[4] = 4,</span><br/><span class="line">}</span><br/><span class="line"> </span><br/><span class="line">for key, value in ipairs(tab1) do</span><br/><span class="line">	print(value)	--&gt;1 2 3 4</span><br/><span class="line">end</span><br/></pre></td></tr></tbody></table></figure><p></p>
<p>Sample_2:<br/></p><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">local tab2 = </span><br/><span class="line">{</span><br/><span class="line">	[1] = 1,</span><br/><span class="line">	[2] = 2,</span><br/><span class="line">	[3] = 3,</span><br/><span class="line">	[5] = 5,</span><br/><span class="line">	[6] = 6,</span><br/><span class="line">}</span><br/><span class="line">for key, value in ipairs(tab2) do</span><br/><span class="line">	print(value)	--&gt;1 2 3</span><br/><span class="line">end</span><br/></pre></td></tr></tbody></table></figure><p></p>
<p>Sample_3:<br/></p><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">local tab3 = </span><br/><span class="line">{</span><br/><span class="line">	[2] = 2,</span><br/><span class="line">	[3] = 3,</span><br/><span class="line">	[4] = 4,</span><br/><span class="line">}</span><br/><span class="line"> </span><br/><span class="line">for key, value in ipairs(tab3) do</span><br/><span class="line">	print(value)	--&gt;没有打印</span><br/><span class="line">end</span><br/></pre></td></tr></tbody></table></figure><p></p>
<p>第二种遍历方式：<br/></p><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">for key, value in pairs(table) do</span><br/><span class="line">	</span><br/><span class="line">end</span><br/></pre></td></tr></tbody></table></figure><p></p>
<p>注：这种方式的遍历是根据table中key的hash值排列的顺序来遍历，并非是table中key的排列顺序，并且不关心key是否从1开始和key是否以1递增。请看下面例子：</p>
<p>Sample_1:<br/></p><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">local tab1 = </span><br/><span class="line">{</span><br/><span class="line">	[1] = 1,</span><br/><span class="line">	[2] = 2,</span><br/><span class="line">	[3] = 3,</span><br/><span class="line">	[4] = 4,</span><br/><span class="line">}</span><br/><span class="line"> </span><br/><span class="line">for key, value in pairs(tab1) do</span><br/><span class="line">	print(value)	--&gt;1 2 4 3</span><br/><span class="line">end</span><br/></pre></td></tr></tbody></table></figure><p></p>
<p>Sample_2:<br/></p><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">local tab2 = </span><br/><span class="line">{</span><br/><span class="line">	[1] = 1,</span><br/><span class="line">	[2] = 2,</span><br/><span class="line">	[3] = 3,</span><br/><span class="line">	[5] = 5,</span><br/><span class="line">	[6] = 6,</span><br/><span class="line">}</span><br/><span class="line">for key, value in pairs(tab2) do</span><br/><span class="line">	print(value)	--&gt;1 2 3</span><br/><span class="line">end</span><br/></pre></td></tr></tbody></table></figure><p></p>
<p>Sample_3:<br/></p><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">local tab3 = </span><br/><span class="line">{</span><br/><span class="line">	[2] = 2,</span><br/><span class="line">	[3] = 3,</span><br/><span class="line">	[4] = 4,</span><br/><span class="line">}</span><br/><span class="line"> </span><br/><span class="line">for key, value in pairs(tab3) do</span><br/><span class="line">	print(value)	--&gt;3 2 4</span><br/><span class="line">end</span><br/></pre></td></tr></tbody></table></figure><p></p>
<p>第三种遍历方式：<br/></p><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">for i=1, #(table) do</span><br/><span class="line">	</span><br/><span class="line">end</span><br/></pre></td></tr></tbody></table></figure><p></p>
<p>注：这种方式的遍历关键的地方在于获取table的大小，#(table)只会从key为1的地方开始，一直以key递增1的顺序来遍历，若找到一个递增不是1的key就结束遍历并且返回table的大小，无论后面是否仍然是顺序的key。请看下面例子：</p>
<p>Sample_1:<br/></p><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">local tab1 = </span><br/><span class="line">{</span><br/><span class="line">	[1] = 1,</span><br/><span class="line">	[2] = 2,</span><br/><span class="line">	[3] = 3,</span><br/><span class="line">	[4] = 4,</span><br/><span class="line">}</span><br/><span class="line"> </span><br/><span class="line">print(&#34;#table:&#34;..#(tab1))		--&gt;4</span><br/><span class="line">for i = 1, #(tab1) do</span><br/><span class="line">	print(tab1[i])	--&gt;1 2 3 4</span><br/><span class="line">end</span><br/></pre></td></tr></tbody></table></figure><p></p>
<p>Sample_2:<br/></p><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">local tab2 = </span><br/><span class="line">{</span><br/><span class="line">	[1] = 1,</span><br/><span class="line">	[2] = 2,</span><br/><span class="line">	[3] = 3,</span><br/><span class="line">	[5] = 5,</span><br/><span class="line">	[6] = 6,</span><br/><span class="line">}</span><br/><span class="line"> </span><br/><span class="line">print(&#34;#table:&#34;..#(tab2))	--&gt;3</span><br/><span class="line">for i = 1, #(tab2) do</span><br/><span class="line">	print(tab2[i])</span><br/><span class="line">end</span><br/></pre></td></tr></tbody></table></figure><p></p>
<p>Sample_3:<br/></p><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">local tab3 = </span><br/><span class="line">{</span><br/><span class="line">	[2] = 2,</span><br/><span class="line">	[3] = 3,</span><br/><span class="line">	[4] = 4,</span><br/><span class="line">}</span><br/><span class="line"> </span><br/><span class="line">print(&#34;#table:&#34;..#(tab3))	--&gt;0</span><br/><span class="line">for i = 1, #(tab3) do</span><br/><span class="line">	print(tab3[i])	--&gt;没有打印</span><br/><span class="line">end</span><br/></pre></td></tr></tbody></table></figure><p></p>
<p>第四种遍历方式：<br/></p><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">for i=1, table.maxn(table) do</span><br/><span class="line">	</span><br/><span class="line">end</span><br/></pre></td></tr></tbody></table></figure><p></p>
<p>注：这种方式的遍历和第三种方式差不多，关键的地方是在table.maxn(table)，table.maxn(table)的意思是获取table中最大值的key。在lua5.2版本table.maxn被移除，请看下面例子：</p>
<p>Sample_1:<br/></p><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">local tab1 = </span><br/><span class="line">{</span><br/><span class="line">	[1] = 1,</span><br/><span class="line">	[2] = 2,</span><br/><span class="line">	[3] = 3,</span><br/><span class="line">	[4] = 4,</span><br/><span class="line">}</span><br/><span class="line"> </span><br/><span class="line">print(&#34;table.maxn:&#34;..table.maxn(tab1))		--&gt;4</span><br/><span class="line">for i = 1, table.maxn(tab1) do</span><br/><span class="line">	print(tab1[i])	--&gt;1 2 3 4</span><br/><span class="line">end</span><br/></pre></td></tr></tbody></table></figure><p></p>
<p>Sample_2:<br/></p><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">local tab2 = </span><br/><span class="line">{</span><br/><span class="line">	[1] = 1,</span><br/><span class="line">	[2] = 2,</span><br/><span class="line">	[3] = 3,</span><br/><span class="line">	[&#34;a&#34;] = 4,</span><br/><span class="line">	[5] = 5,</span><br/><span class="line">	[6] = 6,</span><br/><span class="line">}</span><br/><span class="line"> </span><br/><span class="line">print(&#34;table.maxn:&#34;..table.maxn(tab2))	--&gt;6</span><br/><span class="line">for i = 1, table.maxn(tab2) do</span><br/><span class="line">	print(tab2[i])	--&gt;1 2 3 nil 5 6</span><br/><span class="line">end</span><br/></pre></td></tr></tbody></table></figure><p></p>
<p>Sample_3:<br/></p><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">local tab3 = </span><br/><span class="line">{</span><br/><span class="line">	[2] = 2,</span><br/><span class="line">	[3] = 3,</span><br/><span class="line">	[4] = 4,</span><br/><span class="line">}</span><br/><span class="line"> </span><br/><span class="line">print(&#34;table.maxn:&#34;..table.maxn(tab3))	--&gt;4</span><br/><span class="line">for i = 1, table.maxn(tab2) do</span><br/><span class="line">	print(tab3[i])	--&gt;nil 2 3 4 nil nil</span><br/><span class="line">end</span><br/></pre></td></tr></tbody></table></figure><p></p>

                <hr/>