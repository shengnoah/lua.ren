---
layout: post
title: LUA 脚本简单教程 
tags: [lua文章]
categories: [topic]
---
<h3 id="注释">注释</h3> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>--单行注释

--[[
多行注释
多行注释
--]]
</code></pre></div></div> <h3 id="变量">变量</h3> <ul> <li>nil:无效值，比较时需要加上双引号”“，对全局变量和table复制nil，等于删除它们</li> <li>boolean:布尔值</li> <li>number:双精度类型的实浮点数</li> <li>string:字符串，单引号’‘或双引号”“或[[]]</li> <li>function:函数</li> <li>userdata:任意存储在变量中的c数据结构</li> <li>thread:独立线路</li> <li>table:关联数组，索引可以是数字或字符串，{}创建一个空表，数值下标1开始</li> </ul> <h4 id="关键字">关键字</h4> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>and    break    do    else    elseif    end    false    for
function    if    in     local    nil    not    or    repeat
return    then    true    until    while
</code></pre></div></div> <h4 id="作用域">作用域</h4> <p>默认情况下，变量都是全局的，除非显示local声明为局部变量 尽量使用局部变量，因为1.避免命名冲突2.访问局部变量比全局变量快</p> <h4 id="赋值">赋值</h4> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>a = &#34;hello&#34; .. &#34;world&#34;
a,b = 10,20
-- 这里c的值为nil
a,b,c = 1,2 
</code></pre></div></div> <h3 id="运算符">运算符</h3> <ul> <li>与或非:and or not</li> <li>..:连接两个字符串</li> <li>#:一元运算符，返回字符串或表的长度</li> </ul> <h3 id="控制流程">控制流程</h3> <ol> <li>if语句 <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="n">local</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">10</span>
     <span class="k">if</span> <span class="n">a</span> <span class="o">&gt;</span> <span class="mi">10</span>
     <span class="n">then</span>
         <span class="n">print</span><span class="p">(</span><span class="s">&#34;1&#34;</span><span class="p">)</span>
     <span class="k">else</span>
         <span class="n">print</span><span class="p">(</span><span class="s">&#34;2&#34;</span><span class="p">)</span>
     <span class="n">end</span>
</code></pre></div> </div> </li> <li>循环语句 <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     <span class="o">--</span> <span class="k">while</span><span class="err">循环</span>
     <span class="k">while</span><span class="p">(</span><span class="nb">true</span><span class="p">)</span>
     <span class="k">do</span>
         <span class="n">print</span><span class="p">(</span><span class="s">&#34;xxx&#34;</span><span class="p">)</span>
     <span class="n">end</span>
     <span class="o">--</span> <span class="k">for</span><span class="err">循环</span>
     <span class="n">a</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#34;one&#34;</span><span class="p">,</span><span class="s">&#34;two&#34;</span><span class="p">,</span><span class="s">&#34;three&#34;</span><span class="p">}</span>
     <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">v</span> <span class="n">in</span> <span class="n">ipairs</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">do</span>
         <span class="n">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
     <span class="n">end</span>
     <span class="o">--</span> <span class="err">另一种形式</span>
     <span class="n">function</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
         <span class="n">print</span><span class="p">(</span><span class="s">&#34;function&#34;</span><span class="p">)</span>
         <span class="k">return</span> <span class="n">x</span><span class="o">*</span><span class="mi">2</span>
     <span class="n">end</span>
     <span class="k">for</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">f</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="k">do</span> <span class="n">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
     <span class="n">end</span>
     <span class="o">--</span> <span class="err">打印</span><span class="mi">1</span> <span class="mi">3</span> <span class="mi">5</span>
     <span class="k">for</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">2</span> <span class="n">dp</span> <span class="n">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
     <span class="n">end</span>
     <span class="o">--</span> <span class="n">repeat</span><span class="err">循环</span>
     <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
     <span class="n">repeat</span>
         <span class="n">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
         <span class="n">a</span> <span class="o">=</span> <span class="n">a</span><span class="o">+</span><span class="mi">1</span>
     <span class="n">util</span><span class="p">(</span><span class="n">a</span> <span class="o">&gt;</span> <span class="mi">15</span><span class="p">)</span>
</code></pre></div> </div> </li> </ol> <h3 id="函数">函数</h3> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function maximum(a)
	local mi = 1
	local m = a[mi]
	for i,val in ipairs(a) do
		if val &gt; m then
			mi = i
			m = val
		end
	end
	return m,mi
end

-- 可变参数
function fwrite(fmt, ...)  ---&gt; 固定的参数fmt
    return io.write(string.format(fmt, ...))     
end

-- 统计给定可变参数个数
function foo(...)  
    for i = 1, select(&#39;#&#39;, ...) do  --&gt;获取参数总数
        local arg = select(i, ...); --&gt;读取参数
        print(&#34;arg&#34;, arg);  
    end  
end  
</code></pre></div></div> <h3 id="表">表</h3> <ol> <li>Lua table 使用关联型数组，你可以用任意类型的值来作数组的索引，但这个值不能是 nil。</li> <li>Lua table 是不固定大小的，你可以根据自己需要进行扩容。</li> </ol> <h3 id="官方文档地址">官方文档地址</h3> <p><a href="http://www.runoob.com/manual/lua53doc/">Lua 5.3</a></p>