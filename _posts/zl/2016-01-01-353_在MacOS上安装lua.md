---
layout: post
title: 在MacOS上安装lua 
tags: [lua文章]
categories: [topic]
---
<p>下午心血来潮，想在MacOS上安装lua，但使用brew install lua安装lua报错，于是使用源码安装。</p>

<p>lua官网：<a href="http://www.lua.org/" target="_blank" rel="noopener noreferrer">http://www.lua.org/</a></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/><span class="line">7</span><br/><span class="line">8</span><br/><span class="line">9</span><br/><span class="line">10</span><br/><span class="line">11</span><br/><span class="line">12</span><br/><span class="line">13</span><br/><span class="line">14</span><br/><span class="line">15</span><br/><span class="line">16</span><br/><span class="line">17</span><br/><span class="line">18</span><br/><span class="line">19</span><br/><span class="line">20</span><br/><span class="line">21</span><br/><span class="line">22</span><br/><span class="line">23</span><br/><span class="line">24</span><br/><span class="line">25</span><br/><span class="line">26</span><br/><span class="line">27</span><br/><span class="line">28</span><br/><span class="line">29</span><br/><span class="line">30</span><br/></pre></td><td class="code"><pre><span class="line">xionglie@lie-mac:~ $ brew install lua</span><br/><span class="line">==&gt; Downloading http://www.lua.org/ftp/lua-5.1.4.tar.gz</span><br/><span class="line">Already downloaded: /Library/Caches/Homebrew/lua-5.1.4.tar.gz</span><br/><span class="line">==&gt; Patching</span><br/><span class="line">patching file Makefile</span><br/><span class="line">patching file src/Makefile</span><br/><span class="line"></span><br/><span class="line">patching file lcode.c</span><br/><span class="line">patching file ldblib.c</span><br/><span class="line">patching file liolib.c</span><br/><span class="line">patching file llex.c</span><br/><span class="line">patching file loadlib.c</span><br/><span class="line">patching file lstrlib.c</span><br/><span class="line">patching file lvm.c</span><br/><span class="line">Error: Permission denied - /usr/<span class="built_in">local</span>/lib/lua</span><br/><span class="line">xionglie@lie-mac:~ $ sudo brew install lua</span><br/><span class="line">Password:</span><br/><span class="line">Error: Cowardly refusing to `sudo brew install<span class="string">&#39;</span></span><br/><span class="line"><span class="string">You can use brew with sudo, but only if the brew executable is owned by root.</span></span><br/><span class="line"><span class="string">However, this is both not recommended and completely unsupported so do so at</span></span><br/><span class="line"><span class="string">your own risk.</span></span><br/><span class="line"><span class="string"></span></span><br/><span class="line"><span class="string">xionglie@lie-mac:~ $ ls -ld /usr/local/lib</span></span><br/><span class="line"><span class="string">drwxr-xr-x  5 24561  wheel  170 Feb 18 17:27 /usr/local/lib</span></span><br/><span class="line"><span class="string">#用户是24561，难道用户已经删除？</span></span><br/><span class="line"><span class="string">#后面一查确实是权限问题，使用下面两条命令可以解决</span></span><br/><span class="line"><span class="string">#sudo chown -R xionglie /usr/local/include</span></span><br/><span class="line"><span class="string">#sudo chown -R xionglie /usr/local/lib/</span></span><br/><span class="line"><span class="string">xionglie@lie-mac:~ $ ls -ld /usr/local/lib/lua</span></span><br/><span class="line"><span class="string">ls: /usr/local/lib/lua: No such file or directory</span></span><br/></pre></td></tr></tbody></table></figure>
<h1 id="使用源码安装命令"><a href="#使用源码安装命令" class="headerlink" title="使用源码安装命令"></a>使用源码安装命令</h1><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/></pre></td><td class="code"><pre><span class="line">wget http://www.lua.org/ftp/lua-5.2.1.tar.gz</span><br/><span class="line">tar zxf lua-5.2.1.tar.gz </span><br/><span class="line"><span class="built_in">cd</span> lua-5.2.1/src</span><br/><span class="line">make macosx</span><br/><span class="line">sudo cp lua /usr/bin/lua</span><br/></pre></td></tr></tbody></table></figure>
<h1 id="测试："><a href="#测试：" class="headerlink" title="测试："></a>测试：</h1><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/><span class="line">7</span><br/><span class="line">8</span><br/><span class="line">9</span><br/></pre></td><td class="code"><pre><span class="line">xionglie@lie-mac:~ $ lua -v</span><br/><span class="line">Lua 5.2.1  Copyright (C) 1994-2012 Lua.org, PUC-Rio</span><br/><span class="line"></span><br/><span class="line">xionglie@lie-mac:/tmp $ cat test.lua </span><br/><span class="line">-- just <span class="built_in">test</span></span><br/><span class="line"><span class="built_in">print</span>(<span class="string">&#34;Hello World&#34;</span>)</span><br/><span class="line"></span><br/><span class="line">xionglie@lie-mac:/tmp $ lua test.lua </span><br/><span class="line">Hello World</span><br/></pre></td></tr></tbody></table></figure>
<p>-———————————————-</p>
<h3 id="参考：How-Do-I-Install-Lua-on-MacOS"><a href="#参考：How-Do-I-Install-Lua-on-MacOS" class="headerlink" title="参考：How Do I Install Lua on MacOS?"></a>参考：How Do I Install Lua on MacOS?</h3><p>来源：<a href="http://stackoverflow.com/questions/5496003/how-do-i-install-lua-on-macos" target="_blank" rel="noopener noreferrer">http://stackoverflow.com/questions/5496003/how-do-i-install-lua-on-macos</a> </p>
<p>Compiling from source code is not that painful.<br/>Lua 5.1.4 here: <a href="http://www.lua.org/ftp/lua-5.1.4.tar.gz" target="_blank" rel="noopener noreferrer">http://www.lua.org/ftp/lua-5.1.4.tar.gz</a> Lua 5.2 alpha here: <a href="http://www.lua.org/work/lua-5.2.0-alpha.tar.gz" target="_blank" rel="noopener noreferrer">http://www.lua.org/work/lua-5.2.0-alpha.tar.gz</a></p>
<p>Take Lua 5.2 as example:</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/><span class="line">7</span><br/></pre></td><td class="code"><pre><span class="line"><span class="comment">#Open your Terminal.app </span></span><br/><span class="line">wget http://www.lua.org/work/lua-5.2.0-alpha.tar.gz    </span><br/><span class="line">tar xvzf lua-5.2.0-alpha.tar.gz     </span><br/><span class="line"><span class="built_in">cd</span> lua-5.2.0-alpha/src    </span><br/><span class="line">make macosx(I believe you have Xcode installed)      </span><br/><span class="line"><span class="comment">#After that, you can see &#39;lua&#39; binary under current dir.    </span></span><br/><span class="line">sudo cp lua /usr/bin/lua</span><br/></pre></td></tr></tbody></table></figure>
<p>Now you can enter lua to have a try. :)   </p>

      <script>
        window.disqusProxy={
          shortname: 'quxionglie',
          username: 'xionglieq',
          server: 'disqus.quxionglie.com',
          port: 443,
          adminAvatar: '/avatars/admin-avatar.jpg',
          identifier: '2013/02/18/install-lua-in-mac-os/',
        };
        window.disqus_config = function () {
          this.page.url = window.location.href;
          this.page.identifier = window.disqusProxy.identifier;
        };
      </script>