---
layout: post
title: lua 连接 mysql 
tags: [lua文章]
categories: [topic]
---

    1  
    2  
    3  
    4  
    5  
    6  
    7  
    8  
    9  
    10  
    11  
    12  
    13  
    14  
    15  
    16  
    17  
    18  
    19  
    

|

    
    
    require "luasql.mysql"  
      
      
    env = luasql.mysql()  
      
    -- 连接数据库  
    conn = env:connect("数据库名", "用户名", "密码", "IP地址", 端口)  
      
    -- 设置数据库的编码格式  
    conn:execute"SET NAMES UTF8"  
      
    -- 执行数据库操作  
    cur = conn:execute("sql语句")  
    row = cur:fetch({},"a")  
      
    -- 关闭数据库连接  
    conn:close()  
    -- 关闭数据库环境  
    env:close()  
      
  
---|---  
  
**注**

`Lua >= 5.2`

    
    
    1  
    

|

    
    
    mysql = require "luasql.mysql"  
      
  
---|---