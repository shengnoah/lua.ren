---
layout: post
title: Lua学习随笔 
tags: [lua文章]
categories: [topic]
---
<p>昨天刚立了FLAG，今天就来还愿了。因为是工作中接触到的，已经用了几次，比较熟悉。昨晚在晚上大概搜了下，看了两个教程，看进去了，今早又看了将近两小时，看到了些基础的东西。</p>
<p>我是在Windows上练习LUA，所以只用下个软件就可以开始了，非常方便。<a href="http://static.runoob.com/download/LuaForWindows_v5.1.4-46.exe" target="_blank" rel="external noopener noreferrer">下载入口</a></p>
<p>下载后安装即可，使用方法就是首先打开SciTE，然后在里面直接敲代码，保存为以lua结尾的文件，按F5就可以看到运行结果了。</p>
<p>首先是注释，单行注释是</p>
<pre><code>--单行注释
</code></pre><p>多行注释：</p>
<pre><code>--[[
多行注释
多行注释
--]]
</code></pre><p>lua中变量不需要声明类型，默认所有变量都是全局变量，如果需要局部变量，需要使用local显式声明。</p>
<pre><code>a = 5               -- 全局变量
local b = 5         -- 局部变量
</code></pre><p>lua中两个点“..”表示对字符串进行连接</p>
<pre><code>print(&#34;字符串1&#34; .. “字符串2”)   --字符串1字符串2
</code></pre><p>Lua可以对多个变量同时赋值，变量列表和值列表的各个元素用逗号分开，赋值语句右边的值会依次赋给左边的变量。</p>
<pre><code>a, b = 10, 2*x       -- a=10; b=2*x
</code></pre><p>当变量与值的个数不一致时：</p>
<pre><code>a. 变量个数 &gt; 值的个数             按变量个数补足nil
b. 变量个数 &lt; 值的个数             多余的值会被忽略
</code></pre><p>对 table 的索引使用方括号 []。Lua 也提供了 . 操作。</p>
<pre><code>t[i]
t.i                 -- 当索引为字符串类型时的一种简化写法
gettable_event(t,i) -- 采用索引访问本质上是一个类似这样的函数调用
</code></pre><p>在 Lua 里，table 的创建是通过”构造表达式”来完成，最简单构造表达式是{}</p>
<pre><code>-- 创建一个空的 table
local tbl1 = {}

-- 直接初始表
local tbl2 = {&#34;apple&#34;, &#34;pear&#34;, &#34;orange&#34;, &#34;grape&#34;}
</code></pre><p>lua中的函数，可以类似变量进行互相赋值</p>
<pre><code>function factorial1(n)
   if n == 0 then
       return 1
   else
       return n * factorial1(n - 1)
   end
end
print(factorial1(5))
factorial2 = factorial1
print(factorial2(5))
</code></pre><p>boolean 类型只有两个可选值：true（真） 和 false（假），Lua 把 false 和 nil 看作是”假”，其他的都为”真”:</p>
<p>Lua 编程语言中数值for循环语法格式:</p>
<pre><code>for var=exp1,exp2,exp3 do  
    &lt;执行体&gt;  
end 
</code></pre><p>var 从 exp1 变化到 exp2，每次变化以 exp3 为步长递增 var，并执行一次 “执行体”。exp3 是可选的，如果不指定，默认为1。</p>
<p>lua有两种for循环，上面是第一种，称为数值for循环，可以理解为正常版for。还有一种是泛型for循环，类似于java中的foreach，利用迭代器实现for循环。</p>
<pre><code>a = {&#34;one&#34;, &#34;two&#34;, &#34;three&#34;}
for i, v in ipairs(a) do
   print(i, v)
end 
</code></pre><p>i是数组索引值，v是对应索引的数组元素值。ipairs是Lua提供的一个迭代器函数，用来迭代数组。</p>
<p>Lua 编程语言中 repeat…until 循环语法格式:</p>
<pre><code>repeat
  statements
until( condition )
</code></pre><p>循环条件判断语句（condition）在循环体末尾部分，所以在条件进行判断前循环体都会执行一次。</p>
<p>如果条件判断语句（condition）为 false，循环会重新开始执行，直到条件判断语句（condition）为 true 才会停止执行。</p>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><p>lua函数使用function声明，默认为全局函数，如果要使用局部函数，类似于变量，在前面加个local即可。写法格式和平常的函数一样。lua中的函数可以作为参数传递给函数。</p>
<h3 id="多返回值"><a href="#多返回值" class="headerlink" title="多返回值"></a>多返回值</h3><p>Lua函数可以返回多个结果值，比如string.find，其返回匹配串”开始和结束的下标”（如果不存在匹配串返回nil）。</p>
<pre><code>&gt; s, e = string.find(&#34;www.runoob.com&#34;, &#34;runoob&#34;) 
&gt; print(s, e)
--输出结果：5    10
</code></pre><h3 id="可变参数"><a href="#可变参数" class="headerlink" title="可变参数"></a>可变参数</h3><pre><code>function add(...)  
  local s = 0  
  for i, v in ipairs{...} do   --&gt; {...} 表示一个由所有变长参数构成的数组  
     s = s + v  
  end  
  return s  
end  
print(add(3,4,5,6,7))  ---&gt;25

--select(&#39;#&#39;, …) 返回可变参数的长度
--select(n, …) 用于访问 n 到 select(&#39;#&#39;,…) 的参数
</code></pre><h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h2><p>lua关系运算符中的不等于是“~=”</p>
<p>字符串连接符“..”</p>
<p>“#”返回字符串或表的长度</p>