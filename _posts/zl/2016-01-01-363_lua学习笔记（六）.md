---
layout: post
title: lua学习笔记（六） 
tags: [lua文章]
categories: [topic]
---
<h2 id="Lua面向对象"><a href="#Lua面向对象" class="headerlink" title="Lua面向对象"></a>Lua面向对象</h2><h3 id="封装"><a href="#封装" class="headerlink" title="封装"></a>封装</h3><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/><span class="line">7</span><br/><span class="line">8</span><br/><span class="line">9</span><br/><span class="line">10</span><br/><span class="line">11</span><br/><span class="line">12</span><br/><span class="line">13</span><br/><span class="line">14</span><br/><span class="line">15</span><br/><span class="line">16</span><br/><span class="line">17</span><br/><span class="line">18</span><br/><span class="line">19</span><br/><span class="line">20</span><br/><span class="line">21</span><br/><span class="line">22</span><br/><span class="line">23</span><br/><span class="line">24</span><br/><span class="line">25</span><br/><span class="line">26</span><br/><span class="line">27</span><br/><span class="line">28</span><br/><span class="line">29</span><br/><span class="line">30</span><br/></pre></td><td class="code"><pre><span class="line"></span><br/><span class="line">People={isHumen=<span class="literal">true</span>}		<span class="comment">-- 此处定义的元素都是相当于C++的静态成员变量</span></span><br/><span class="line"></span><br/><span class="line"><span class="comment">-- 基类方法new</span></span><br/><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">(o,n,a)</span></span></span><br/><span class="line">	o=o <span class="keyword">or</span> {}</span><br/><span class="line">	<span class="built_in">setmetatable</span>(o,self)	<span class="comment">-- self相当于C++的this指针，但是这里指代的是元类People而不是对象o</span></span><br/><span class="line">	self.<span class="built_in">__index</span>=self</span><br/><span class="line">	o.name=n				<span class="comment">-- 用self代替o相当于C++中给静态成员变量赋值</span></span><br/><span class="line">	o.age=a</span><br/><span class="line">	<span class="keyword">return</span> o</span><br/><span class="line"><span class="keyword">end</span></span><br/><span class="line"></span><br/><span class="line"><span class="comment">-- 基类元方法__tostring</span></span><br/><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">People:__tostring</span><span class="params">()</span></span></span><br/><span class="line">	<span class="keyword">local</span> sum=<span class="string">&#34;名字为：&#34;</span>..self.name..<span class="string">&#34;n年龄为：&#34;</span>..self.age <span class="comment">-- 此处self指代的是实际调用时的对象</span></span><br/><span class="line">	<span class="keyword">return</span> sum</span><br/><span class="line"><span class="keyword">end</span></span><br/><span class="line"></span><br/><span class="line"><span class="comment">-- 基类方法walk</span></span><br/><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">People:walk</span><span class="params">()</span></span></span><br/><span class="line">    <span class="built_in">print</span>(<span class="string">&#34;我正在走！&#34;</span>)</span><br/><span class="line"><span class="keyword">end</span></span><br/><span class="line"></span><br/><span class="line"><span class="comment">-- 创建对象</span></span><br/><span class="line">me=People:new(<span class="literal">nil</span>,<span class="string">&#34;Jaxes&#34;</span>,<span class="number">21</span>)</span><br/><span class="line"></span><br/><span class="line"><span class="comment">-- 调用对象中的函数</span></span><br/><span class="line"><span class="built_in">print</span>(me)		<span class="comment">-- 等价于print(tostring(me))</span></span><br/><span class="line">me:walk()		<span class="comment">-- 等价于me.walk(me)</span></span><br/></pre></td></tr></tbody></table></figure>
<h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/><span class="line">7</span><br/><span class="line">8</span><br/><span class="line">9</span><br/><span class="line">10</span><br/><span class="line">11</span><br/><span class="line">12</span><br/><span class="line">13</span><br/><span class="line">14</span><br/><span class="line">15</span><br/><span class="line">16</span><br/><span class="line">17</span><br/><span class="line">18</span><br/><span class="line">19</span><br/><span class="line">20</span><br/><span class="line">21</span><br/></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 类Worker派生自People类</span></span><br/><span class="line">Worker=People:new()</span><br/><span class="line"></span><br/><span class="line"><span class="comment">-- 派生类</span></span><br/><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Worker:new</span><span class="params">(o,n,a,id)</span></span></span><br/><span class="line">	o=o <span class="keyword">or</span> People:new(o,n,a)</span><br/><span class="line">	<span class="built_in">setmetatable</span>(o,self)</span><br/><span class="line">	self.<span class="built_in">__index</span>=self</span><br/><span class="line">	o.id=id</span><br/><span class="line">	<span class="keyword">return</span> o</span><br/><span class="line"><span class="keyword">end</span></span><br/><span class="line"></span><br/><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Worker:__tostring</span><span class="params">()</span></span></span><br/><span class="line">	<span class="keyword">local</span> sum=People.<span class="built_in">__tostring</span>(self)</span><br/><span class="line">	sum=sum..<span class="string">&#34;nID为：&#34;</span>..self.id</span><br/><span class="line">	<span class="keyword">return</span> sum</span><br/><span class="line"><span class="keyword">end</span></span><br/><span class="line"></span><br/><span class="line">worker=Worker:new(<span class="literal">nil</span>,<span class="string">&#34;kaka&#34;</span>,<span class="number">55</span>,<span class="number">01</span>)</span><br/><span class="line"><span class="built_in">print</span>(worker)</span><br/><span class="line">worker:walk()		<span class="comment">-- 继承自父类函数walk</span></span><br/></pre></td></tr></tbody></table></figure>
<h3 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h3><p>这个部分暂时还不清楚怎么搞，暂时做为后续储备内容</p>