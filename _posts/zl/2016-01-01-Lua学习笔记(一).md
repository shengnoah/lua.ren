---
layout: post
title: Lua学习笔记(一) 
tags: [lua文章]
categories: [lua文章]
---
  * 基本语法
    * 交互式编程
    * 脚本式编程
    * 注释
      * 单行注释
      * 多行注释
    * 标识符
    * 关键词
    * 全局变量
  * 数据类型
    * nil
    * bool
    * number
    * string
    * table
    * function
    * thread
    * userdata

## 基本语法

### 交互式编程

所谓的交互式编程的意思，其实就是 **在命令行中输入程序就可以立即查看效果。**

### 脚本式编程

将Lua代码保持在.lua文件中执行。

两种编程方式下的简单的helloword程序：

![](https://thbelief.github.io//2019/04/20/Lua学习笔记-一/helloworld.jpg)

### 注释

#### 单行注释

两个减号。

    
    
    1  
    

|

    
    
    --  
      
  
---|---  
  
#### 多行注释

这个东西有点儿小奇怪，习惯了就没问题了。

    
    
    1  
    2  
    3  
    4  
    

|

    
    
    --[[  
     多行注释  
     多行注释  
     --]]  
      
  
---|---  
  
总的：

    
    
    1  
    2  
    3  
    4  
    5  
    

|

    
    
    print("helloword")  
    --print("helloworld")  
    --[[  
    print("helloworld")  
    --]]  
      
  
---|---  
  
### 标识符

标示符以 **一个字母 A 到 Z 或 a 到 z 或下划线 _ 开头后加上0个或多个字母，下划线，数字（0到9）。**

最好 **不要使用下划线加大写字母** 的标示符，因为Lua的 **保留字** 也是这样的。

Lua **不允许使用特殊字符如 @, $, 和 % 来定义标示符** 。 Lua 是一个 **区分大小写** 的编程语言。

正确标识符举例：

    
    
    1  
    

|

    
    
    mohd      zara      abc     move_name    a_123  
      
  
---|---  
  
### 关键词

下面罗列出Lua的一些保留关键词，这些词 **不能作为常量或者变量或者用户的自定义标识符。**

**注意：下划线+大写字符串被默认为Lua内部的全局变量。**

|  |  |  
---|---|---|---  
and | break | do | else  
elseif | end | false | for  
function | if | in | local  
nil | not | or | repeat  
return | then | true | until  
while |  |  
  
### 全局变量

和C++等语言不同的是，在Lua中，所有的变量都是所谓的“全局变量”。

并不需要声明，用的时候直接访问就可以了，如果访问一个未初始化的变量并不会报错，只是会返回一个nil而已，这里nil的意思其实就是false的意思？同理，删除一个全局变量直接赋值为nil即可。

    
    
    1  
    2  
    

|

    
    
    b = nil  
    print(b)  
      
  
---|---  
  
结果为：

    
    
    1  
    

|

    
    
    nil  
      
  
---|---  
  
## 数据类型

 **Lua是动态的类型语言，它的变量不需要类型定义，只需要赋值即可。**

数据类型 | 描述  
---|---  
nil | 这个最简单，只有值nil属于该类，表示一个无效值（在条件表达式中相当于false）。  
boolean | 包含两个值：false和true。  
number | 表示双精度类型的实浮点数  
string | 字符串由一对双引号或单引号来表示  
function | 由 C 或 Lua 编写的函数  
userdata | 表示任意存储在变量中的C数据结构  
thread | 表示执行的独立线路，用于执行协同程序  
table | Lua 中的表（table）其实是一个”关联数组”（associative arrays），数组的索引可以是数字、字符串或表类型。在 Lua
里，table 的创建是通过”构造表达式”来完成，最简单构造表达式是{}，用来创建一个空表。  
  
可以使用type函数测试变量的类型：

![](https://thbelief.github.io//2019/04/20/Lua学习笔记-一/数据类型.jpg)

### nil

表示的是“空”，没有任何的有效值，它只能输出一个nil值。

这里需要特别的注意：使用nil做判断的时候必须用双引号：

这里第一个为false的原因是：

    
    
    1  
    

|

    
    
    type(type(X))==string  
      
  
---|---  
  
![](https://thbelief.github.io//2019/04/20/Lua学习笔记-一/nil比较.jpg)

### bool

true和false两种值。

### number

 **Lua中默认的number类型只有一种——double（双精度）。**

### string

和JS中差不多，双引号或者单引号都可以表示字符串。 **[[]]** 可以表示”一块“字符串。

注意： **Lua中字符串的拼接有点儿特殊** ，和其它的高级语言不一样：

**只能使用”..”,不能使用”+”.**

![](https://thbelief.github.io//2019/04/20/Lua学习笔记-一/字符串拼接1.jpg)

![](https://thbelief.github.io//2019/04/20/Lua学习笔记-一/字符串拼接2.jpg)

**字符串长度计算——“#”**

    
    
    1  
    

|

    
    
    print(#"test")  
      
  
---|---  
  
输出：

    
    
    1  
    

|

    
    
    4  
      
  
---|---  
  
### table

table即表，在Lua中table是通过“ **构造表达式**
”来实现的，最简单的就是“{}”，这个就是一个空表，也可以初始化表，即添加一些数据就可以了。

在Lua中，table其实就是一个 **关联数组** 。 **数组的索引可以是数字或者字符串。**

和c++之类的不一样，Lua默认初始索引一般 **以1开始** 。

    
    
    1  
    2  
    3  
    4  
    5  
    

|

    
    
    -- 创建一个空的 table  
    local tbl1 = {}  
       
    -- 直接初始表  
    local tbl2 = {"apple", "pear", "orange", "grape"}  
      
  
---|---  
  
注意：

**table没有长度，一般是需要的时候直接加进去即可，没初始化的table的值都是nil。**

### function

Lua中，函数可以存在变量里面。这个特性和JavaScript里面的特性有点儿像。

### thread

在 Lua 里， **最主要的线程是协同程序（coroutine）** 。它跟线程（thread）差不多，拥有自己 **独立的栈、局部变量和指令指针**
，可以跟其他协同程序 **共享全局变量和其他大部分东西。**

线程跟协程的区别：线程可以 **同时多个运行** ，而协程 **任意时刻只能运行一个** ，并且处于运行状态的协程只有被挂起（suspend）时才会暂停。

### userdata

 **所谓的自定义类型。**

主要就是用于表示一种 **由应用程序或 C/C++ 语言库所创建的类型** ，可以将 **任意 C/C++ 的任意数据类型的数据（通常是 struct 和
指针）存储到 Lua 变量中** 调用。