---
layout: post
title: Lua学习笔记一 
tags: [lua文章]
categories: [topic]
---
<p>PS:由于公司项目中用到Lua,所以准备学习一下，这里做下学习笔记。</p>
<blockquote>
<p>Lua 是一种轻量小巧的脚本语言，用标准C语言编写并以源代码形式开放， 其设计目的是为了嵌入应用程序中，从而为应用程序提供灵活的扩展和定制功能。</p>
</blockquote>
<h1 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h1><h2 id="交互式编程"><a href="#交互式编程" class="headerlink" title="交互式编程"></a>交互式编程</h2><p>lua -i 进入交互式编程</p>
<h2 id="脚本式编程"><a href="#脚本式编程" class="headerlink" title="脚本式编程"></a>脚本式编程</h2><p>新建一个hello.lua文件，将lua代码写在hello.lua中</p>
<p><code>print(&#34;Hello world&#34;)</code></p>
<p>执行：</p>
<p><code>lua hello.lua</code></p>
<p>结果：</p>
<p><code>Hello rorld</code></p>
<p>也可以将代码改为如下形式：</p>
<figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/></pre></td><td class="code"><pre><span class="line">#!/usr/<span class="keyword">local</span>/bin/lua</span><br/><span class="line"><span class="built_in">print</span>(<span class="string">&#34;Hello world&#34;</span>)</span><br/></pre></td></tr></tbody></table></figure>
<p>执行：</p>
<p><code>./hello.lua</code></p>
<p>结果和上面一样。</p>
<p>这种模式称为脚本式编程。</p>
<h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><p>单行注释：</p>
<p><code>--</code></p>
<p>多行注释：</p>
<figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/></pre></td><td class="code"><pre><span class="line"></span><br/><span class="line"><span class="comment">	多行注释</span></span><br/><span class="line"><span class="comment">	多行注释</span></span><br/><span class="line"><span class="comment">--]]</span></span><br/></pre></td></tr></tbody></table></figure>
<h2 id="标识符"><a href="#标识符" class="headerlink" title="标识符"></a>标识符</h2><p>以字母或者下划线_开头，后面加上0个或多个字母，下划线，数字。(标识符区分大小写)</p>
<h2 id="关键字"><a href="#关键字" class="headerlink" title="关键字"></a>关键字</h2><table>
<thead>
<tr>
<th>and</th>
<th>break</th>
<th>do</th>
<th>else</th>
</tr>
</thead>
<tbody>
<tr>
<td>elseif</td>
<td>end</td>
<td>false</td>
<td>for</td>
</tr>
<tr>
<td>function</td>
<td>if</td>
<td>in</td>
<td>local</td>
</tr>
<tr>
<td>nil</td>
<td>not</td>
<td>or</td>
<td>repeat</td>
</tr>
<tr>
<td>return</td>
<td>then</td>
<td>true</td>
<td>until</td>
</tr>
<tr>
<td>while</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="Lua变量"><a href="#Lua变量" class="headerlink" title="Lua变量"></a>Lua变量</h1><ul>
<li>全局变量 -默认申明的都是全局变量，除非申明为局部变量</li>
<li>局部变量-指定为local时</li>
<li>表字段-特殊变量，可以保存除了nil之外的任何内容，包括函数</li>
</ul>
<h2 id="变量定义"><a href="#变量定义" class="headerlink" title="变量定义"></a>变量定义</h2><p>格式：</p>
<p><code>type variable_list</code></p>
<p>示例：</p>
<figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> i,j</span><br/><span class="line"><span class="keyword">local</span> a</span><br/></pre></td></tr></tbody></table></figure>
<p>变量初始化：</p>
<p><code>type variable_list = value_list</code></p>
<p>示例：</p>
<figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> a,b = <span class="number">10</span>,<span class="number">20</span></span><br/><span class="line"><span class="built_in">print</span>(<span class="string">&#34;a:&#34;</span>,a)</span><br/><span class="line"><span class="built_in">print</span>(<span class="string">&#34;b&#34;</span>,b)</span><br/><span class="line">b,a = a,b</span><br/><span class="line"><span class="built_in">print</span>(<span class="string">&#34;a:&#34;</span>,a)</span><br/><span class="line"><span class="built_in">print</span>(<span class="string">&#34;b:&#34;</span>,b)</span><br/></pre></td></tr></tbody></table></figure>
<p>结果：</p>
<figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/></pre></td><td class="code"><pre><span class="line">a:	<span class="number">10</span></span><br/><span class="line">b:	<span class="number">20</span></span><br/><span class="line"><span class="comment">------</span></span><br/><span class="line">a:	<span class="number">20</span></span><br/><span class="line">b:	<span class="number">10</span></span><br/></pre></td></tr></tbody></table></figure>
<h1 id="Lua数据类型"><a href="#Lua数据类型" class="headerlink" title="Lua数据类型"></a>Lua数据类型</h1><blockquote>
<p>Lua 是动态类型语言，变量不要类型定义,只需要为变量赋值。 值可以存储在变量中，作为参数传递或结果返回。</p>
</blockquote>
<p>Lua中的值类型有八种：</p>
<table>
<thead>
<tr>
<th>数据类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>nil</td>
<td>无效值，没有被赋值，条件表达式中为false</td>
</tr>
<tr>
<td>boolean</td>
<td>false和true</td>
</tr>
<tr>
<td>number</td>
<td>双精度类型的实浮点数</td>
</tr>
<tr>
<td>string</td>
<td>字符串，单引号或双引号内</td>
</tr>
<tr>
<td>function</td>
<td>表示C或者Lua编写的函数</td>
</tr>
<tr>
<td>userdata</td>
<td>表示C语言数据结构</td>
</tr>
<tr>
<td>thread</td>
<td>表示独立的执行线程，它用于实现协同程序</td>
</tr>
<tr>
<td>table</td>
<td>表示普通数组，符号表，集合，记录，图形，树等，并实现关联数组。 它可以保存任何值(除了<code>nil</code>)</td>
</tr>
</tbody>
</table>
<figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/><span class="line">7</span><br/></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(<span class="string">&#34;Hello world&#34;</span>))    <span class="comment">--string</span></span><br/><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(<span class="number">123</span>))              <span class="comment">--number</span></span><br/><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(<span class="built_in">print</span>))			  <span class="comment">--function</span></span><br/><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(<span class="built_in">type</span>))			  <span class="comment">--function</span></span><br/><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(<span class="literal">true</span>))			  <span class="comment">--boolean</span></span><br/><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(<span class="literal">nil</span>))			  <span class="comment">--nil</span></span><br/><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(<span class="built_in">type</span>(X)))		  <span class="comment">--string</span></span><br/></pre></td></tr></tbody></table></figure>
<p>运行结果：</p>
<figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/><span class="line">7</span><br/></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span></span><br/><span class="line">number</span><br/><span class="line"><span class="function"><span class="keyword">function</span></span></span><br/><span class="line"><span class="function"></span></span><br/><span class="line"><span class="function"><span class="title">boolean</span></span></span><br/><span class="line"><span class="function"><span class="title">nil</span></span></span><br/><span class="line"><span class="function"><span class="title">string</span></span></span><br/></pre></td></tr></tbody></table></figure>
<h2 id="nil"><a href="#nil" class="headerlink" title="nil"></a>nil</h2><p>nil 表示无效值，如一个没有被赋值的变量</p>
<figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(a))</span><br/><span class="line">结果是 <span class="literal">nil</span></span><br/></pre></td></tr></tbody></table></figure>
<p>对于全局变量和 table，nil 还有一个”删除”作用，给全局变量或者 table 表里的变量赋一个 nil 值，等同于把它们删掉</p>
<figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/><span class="line">7</span><br/><span class="line">8</span><br/><span class="line">9</span><br/></pre></td><td class="code"><pre><span class="line">tab = {key1 = <span class="string">&#34;val1&#34;</span>,key2 = <span class="string">&#34;val2&#34;</span>,<span class="string">&#34;val3&#34;</span>}</span><br/><span class="line"><span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">pairs</span>(tab) <span class="keyword">do</span></span><br/><span class="line">	<span class="built_in">print</span>(k..<span class="string">&#34;---&#34;</span>..v)</span><br/><span class="line"><span class="keyword">end</span></span><br/><span class="line"><span class="built_in">print</span>(<span class="string">&#34;-------------&#34;</span>)</span><br/><span class="line">tab.key1 = <span class="literal">nil</span></span><br/><span class="line"><span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">pairs</span>(tab) <span class="keyword">do</span></span><br/><span class="line">	<span class="built_in">print</span>(k..<span class="string">&#34;---&#34;</span>..v)</span><br/><span class="line"><span class="keyword">end</span></span><br/></pre></td></tr></tbody></table></figure>
<p>结果：</p>
<figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/></pre></td><td class="code"><pre><span class="line"><span class="number">1</span><span class="comment">---val3</span></span><br/><span class="line">key1<span class="comment">---val1</span></span><br/><span class="line">key2<span class="comment">---val2</span></span><br/><span class="line"><span class="comment">-------------</span></span><br/><span class="line"><span class="number">1</span><span class="comment">---val3</span></span><br/><span class="line">key2<span class="comment">---val2</span></span><br/></pre></td></tr></tbody></table></figure>
<p>type(type(x)) 结果是string</p>
<p>type(x) == nil   结果是false</p>
<p>type(x) == “nil” 结果是true</p>
<h2 id="boolean"><a href="#boolean" class="headerlink" title="boolean"></a>boolean</h2><p>boolean 类型只有两个可选值：true（真） 和 false（假），Lua 把 false 和 nil 看作是”假”，其他的都为”真”</p>
<h2 id="number"><a href="#number" class="headerlink" title="number"></a>number</h2><p>Lua 默认只有一种 number 类型 – double（双精度）类型（默认类型可以修改 luaconf.h 里的定义）</p>
<h2 id="string"><a href="#string" class="headerlink" title="string"></a>string</h2><p>字符串由一对双引号或单引号来表示</p>
<figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/></pre></td><td class="code"><pre><span class="line">string1 = <span class="string">&#34;hello world&#34;</span></span><br/><span class="line">string2 = <span class="string">&#39;hello world2&#39;</span></span><br/></pre></td></tr></tbody></table></figure>
<p>也可以用[[]]表示一块字符串</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/><span class="line">7</span><br/><span class="line">8</span><br/></pre></td><td class="code"><pre><span class="line">html = [[</span><br/><span class="line">  &lt;html&gt;</span><br/><span class="line">&lt;head&gt;&lt;/head&gt;</span><br/><span class="line">&lt;body&gt;</span><br/><span class="line">    &lt;a href=&#34;http://www.baidu.com/&#34;&gt;百度&lt;/a&gt;</span><br/><span class="line">&lt;/body&gt;</span><br/><span class="line">&lt;/html&gt;</span><br/><span class="line">]]</span><br/></pre></td></tr></tbody></table></figure>
<p>在对一个数字字符串上进行算术操作时，Lua 会尝试将这个数字字符串转成一个数字:</p>
<figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#34;1&#34;</span> + <span class="number">1</span>)</span><br/><span class="line"><span class="built_in">print</span>(<span class="string">&#34;1&#34;</span> + <span class="string">&#34;1&#34;</span>)</span><br/><span class="line"><span class="built_in">print</span>(<span class="string">&#34;1+1&#34;</span>)</span><br/><span class="line"><span class="built_in">print</span>(<span class="string">&#34;Hello&#34;</span> + <span class="number">1</span>)</span><br/></pre></td></tr></tbody></table></figure>
<p>结果：</p>
<figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/></pre></td><td class="code"><pre><span class="line"><span class="number">2.0</span></span><br/><span class="line"><span class="number">2.0</span></span><br/><span class="line"><span class="number">1</span>+<span class="number">1</span></span><br/><span class="line">lua: /Users/wufei/project/lua_workspace/data_type.lua:<span class="number">36</span>: attempt to perform arithmetic on a <span class="built_in">string</span> value</span><br/><span class="line">stack <span class="built_in">traceback</span>:</span><br/></pre></td></tr></tbody></table></figure>
<p>“Hello” + 1 执行报错</p>
<p>字符串的拼接用 ..</p>
<figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#34;a&#34;</span> .. <span class="string">&#34;b&#34;</span>)</span><br/><span class="line"><span class="built_in">print</span>(<span class="number">123</span> .. <span class="number">456</span>) <span class="comment">--数字和.. 之间一定要有空格，不然会报错</span></span><br/></pre></td></tr></tbody></table></figure>
<p>使用#来计算字符串长度</p>
<p><code>print(#&#34;hello world&#34;)</code></p>
<p>结果为：11</p>
<h2 id="table-数组，字典"><a href="#table-数组，字典" class="headerlink" title="table(数组，字典 )"></a>table(数组，字典 )</h2><p>table 的创建是通过”构造表达式”来完成，最简单构造表达式是{}，用来创建一个空表。也可以在表里添加一些数据，直接初始化表:</p>
<p>pairs 遍历所有元素 字典无序</p>
<p>ipairs 只能遍历数组，不能遍历字典类型，只能遍历没有key的元素</p>
<figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> table1 = {}			<span class="comment">--方式一</span></span><br/><span class="line"><span class="keyword">local</span> table2 = {<span class="string">&#34;a&#34;</span>,<span class="string">&#34;b&#34;</span>,<span class="string">&#34;c&#34;</span>,<span class="string">&#34;d&#34;</span>}</span><br/></pre></td></tr></tbody></table></figure>
<p>Lua的table是一个”关联数组”，数组的索引可以是数字或者是字符串</p>
<figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/><span class="line">7</span><br/><span class="line">8</span><br/></pre></td><td class="code"><pre><span class="line">a = {}</span><br/><span class="line">a[<span class="string">&#34;key&#34;</span>] = <span class="string">&#34;value&#34;</span></span><br/><span class="line">key = <span class="number">1</span></span><br/><span class="line">a[key] = <span class="number">2</span></span><br/><span class="line">a[key] = a[key] + <span class="number">1</span></span><br/><span class="line"><span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">pairs</span>(a) <span class="keyword">do</span></span><br/><span class="line">  <span class="built_in">print</span>(k..<span class="string">&#34;:&#34;</span>..v)</span><br/><span class="line"><span class="keyword">end</span></span><br/></pre></td></tr></tbody></table></figure>
<p>结果：</p>
<figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>:<span class="number">3</span></span><br/><span class="line">key:value</span><br/></pre></td></tr></tbody></table></figure>
<p>Lua 数组默认索引从1开始：</p>
<figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> <span class="built_in">table</span> = {<span class="string">&#34;a&#34;</span>,<span class="string">&#34;b&#34;</span>,<span class="string">&#34;c&#34;</span>}</span><br/><span class="line"><span class="keyword">for</span> key,value <span class="keyword">in</span> <span class="built_in">pairs</span>(<span class="built_in">table</span>) <span class="keyword">do</span></span><br/><span class="line">  <span class="built_in">print</span>(<span class="string">&#34;key&#34;</span>,key)</span><br/><span class="line"><span class="keyword">end</span></span><br/></pre></td></tr></tbody></table></figure>
<p>结果：</p>
<figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/></pre></td><td class="code"><pre><span class="line">key	<span class="number">1</span></span><br/><span class="line">key	<span class="number">2</span></span><br/><span class="line">key	<span class="number">3</span></span><br/></pre></td></tr></tbody></table></figure>
<p>table 不会固定长度大小，有新数据添加时 table 长度会自动增长，没初始的 table 都是 nil</p>
<figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/><span class="line">7</span><br/></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> <span class="built_in">table</span> = {}</span><br/><span class="line"><span class="keyword">for</span> i = <span class="number">1</span>,<span class="number">10</span> <span class="keyword">do</span></span><br/><span class="line">  <span class="built_in">table</span>[i] = i</span><br/><span class="line"><span class="keyword">end</span></span><br/><span class="line"><span class="built_in">table</span>[<span class="string">&#34;key&#34;</span>] = <span class="string">&#34;value&#34;</span></span><br/><span class="line"><span class="built_in">print</span>(<span class="built_in">table</span>[<span class="string">&#34;key&#34;</span>])</span><br/><span class="line"><span class="built_in">print</span>(<span class="built_in">table</span>[<span class="string">&#34;a&#34;</span>])</span><br/></pre></td></tr></tbody></table></figure>
<p>结果：</p>
<figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/></pre></td><td class="code"><pre><span class="line">value</span><br/><span class="line"><span class="literal">nil</span></span><br/></pre></td></tr></tbody></table></figure>
<p>因为key为a的元素没有初始化，所以为nil</p>
<p>table 的长度和字符串长度一样，用#来获取：</p>
<p><code>print(#table)</code></p>
<h2 id="function"><a href="#function" class="headerlink" title="function"></a>function</h2><p>Lua中，函数是被看作是”第一类值（First-Class Value）”，函数可以存在变量里:</p>
<figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span><span class="params">(a)</span></span></span><br/><span class="line">	<span class="built_in">print</span>(<span class="string">&#34;test:&#34;</span>..a)</span><br/><span class="line"><span class="keyword">end</span></span><br/><span class="line">test(<span class="number">1</span>)</span><br/><span class="line">test2 = test</span><br/><span class="line">test2(<span class="number">2</span>)</span><br/></pre></td></tr></tbody></table></figure>
<p>结果：</p>
<figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/></pre></td><td class="code"><pre><span class="line"><span class="number">1</span></span><br/><span class="line"><span class="number">2</span></span><br/></pre></td></tr></tbody></table></figure>
<p>function 可以以匿名函数的方式通过参数传递:</p>
<figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/><span class="line">7</span><br/><span class="line">8</span><br/><span class="line">9</span><br/><span class="line">10</span><br/><span class="line">11</span><br/><span class="line">12</span><br/></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">testFun</span><span class="params">(tab,fun)</span></span></span><br/><span class="line">	<span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">pairs</span>(tab) <span class="keyword">do</span></span><br/><span class="line">		<span class="built_in">print</span>(fun(k,v))</span><br/><span class="line">	<span class="keyword">end</span>	</span><br/><span class="line"><span class="keyword">end</span></span><br/><span class="line"></span><br/><span class="line"><span class="keyword">local</span> tab = {k1 = <span class="string">&#34;v1&#34;</span>,k2 = <span class="string">&#34;v2&#34;</span>}</span><br/><span class="line">testFun(tab,</span><br/><span class="line"><span class="function"><span class="keyword">function</span><span class="params">(k,v)</span></span></span><br/><span class="line">	<span class="keyword">return</span> k..<span class="string">&#34;=&#34;</span>..v</span><br/><span class="line"><span class="keyword">end</span></span><br/><span class="line">)</span><br/></pre></td></tr></tbody></table></figure>
<p>结果：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/></pre></td><td class="code"><pre><span class="line">k2=v2</span><br/><span class="line">k1=v1</span><br/></pre></td></tr></tbody></table></figure>
<h2 id="thread"><a href="#thread" class="headerlink" title="thread"></a>thread</h2><p>lua中，最主要的线程是协同程序</p>
<h2 id="userdata"><a href="#userdata" class="headerlink" title="userdata"></a>userdata</h2><p>userdata 是一种用户自定义数据，用于表示一种由应用程序或 C/C++ 语言库所创建的类型，可以将任意 C/C++ 的任意数据类型的数据（通常是 struct 和 指针）存储到 Lua 变量中调用。</p>
<h1 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h1><ul>
<li><p>算术运算符</p>
</li>
<li><p>关系运算符</p>
</li>
<li><p>逻辑运算符</p>
</li>
<li><p>其他运算符</p>
</li>
</ul>
<h2 id="算术运算符"><a href="#算术运算符" class="headerlink" title="算术运算符"></a>算术运算符</h2><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/><span class="line">7</span><br/></pre></td><td class="code"><pre><span class="line">+  加法运算</span><br/><span class="line">-	 减法运算</span><br/><span class="line">*  乘法运算</span><br/><span class="line">/  除法运算</span><br/><span class="line">%  取模运算</span><br/><span class="line">^  指数运算</span><br/><span class="line">-  取负</span><br/></pre></td></tr></tbody></table></figure>
<h2 id="关系运算符"><a href="#关系运算符" class="headerlink" title="关系运算符"></a>关系运算符</h2><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/></pre></td><td class="code"><pre><span class="line">==</span><br/><span class="line">~=  不等于</span><br/><span class="line">&gt;</span><br/><span class="line">&lt;</span><br/><span class="line">&gt;=</span><br/><span class="line">&lt;=</span><br/></pre></td></tr></tbody></table></figure>
<h2 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h2><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/></pre></td><td class="code"><pre><span class="line"><span class="keyword">and</span></span><br/><span class="line"><span class="keyword">or</span></span><br/><span class="line"><span class="keyword">not</span></span><br/></pre></td></tr></tbody></table></figure>
<h2 id="其他运算符"><a href="#其他运算符" class="headerlink" title="其他运算符"></a>其他运算符</h2><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/></pre></td><td class="code"><pre><span class="line">..  字符串拼接</span><br/><span class="line">#   取字符串或者<span class="built_in">table</span>的长度</span><br/></pre></td></tr></tbody></table></figure>
<h1 id="参考资料："><a href="#参考资料：" class="headerlink" title="参考资料："></a>参考资料：</h1><p><a href="http://www.runoob.com/lua/lua-tutorial.html" target="_blank" rel="noopener noreferrer">http://www.runoob.com/lua/lua-tutorial.html</a></p>