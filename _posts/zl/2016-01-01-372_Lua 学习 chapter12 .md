---
layout: post
title: Lua 学习 chapter12  
tags: [lua文章]
categories: [topic]
---
<h3 id="目录">目录</h3>
<ol>
  <li>日期和时间</li>
  <li>日期和时间的处理</li>
</ol>

<blockquote>
  <p>What is the cost of lies? It’s not that we’ll mistake them for the truth. The real danger is that if we hear enough lies, then we no longer recognize the truth at all. What can we do then? What else is left but to abandon even the hope of truth and content ourselves instaed with stories? In these stories, it doesn’t matter who the heroes are. All we want to know is: who is to blame? No friends. Or, at least, not important ones.</p>
</blockquote>

<h2 id="日期和时间">日期和时间</h2>
<p>在lua中日期的表示分为两种方式，一种是一个整数，从1970年以来一共多少秒，另一种是日期表，包含以下重要的字段：
year,month,day,hour,min,sec,wday,yday以及isdat,其中wday是这周的第几天，yday是今年的第几天，isdat是否是夏时令。日期表中不包含时区，程序需要结相应的时区对其正确解析。
os.date(“*t”, os.time()) 生成一个日期表，同样不带第二个参数也可以获取到当前时间的日期表。</p>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="nb">os.time</span><span class="p">()</span> <span class="c1">-- 当前的时间，秒数</span>
<span class="nb">os.time</span><span class="p">({</span><span class="n">year</span> <span class="o">=</span> <span class="mi">2019</span><span class="p">,</span><span class="n">month</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span> <span class="n">day</span> <span class="o">=</span> <span class="mi">13</span><span class="p">})</span> <span class="c1">--输出秒数</span>
<span class="nb">os.date</span><span class="p">(</span><span class="s2">&#34;*t&#34;</span><span class="p">,</span> <span class="mi">906000490</span><span class="p">))</span> <span class="c1">--{year = 1998, month = 9, day = 16, yday = 259, wday = 4, hour = 23, min = 48, sec = 10, isdst = false}</span>
<span class="c1">--os.date() 在一定程度上是函数os.time()的反函数</span>
<span class="n">t</span> <span class="o">=</span> <span class="mi">906000490</span>
<span class="nb">os.time</span><span class="p">(</span><span class="nb">os.date</span><span class="p">(</span><span class="s2">&#34;*t&#34;</span><span class="p">,</span><span class="n">t</span><span class="p">))</span> <span class="o">==</span> <span class="n">t</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<p>os.date会将日期格式化为一个字符串</p>

<ol>
  <li>%a 星期</li>
  <li>%A 星期几全称</li>
  <li>%b 月份简称</li>
  <li>%B 月份全称</li>
  <li>%c 日期和时间（09/16/98 23:48:10）</li>
  <li>%d 一个月中的第几天</li>
  <li>%H 24小时制小时数</li>
  <li>%I 12小时制小时数</li>
  <li>%j 一年中的第几天</li>
  <li>%m 月份</li>
  <li>%M 分钟</li>
  <li>%p am or pm</li>
  <li>%S 秒数 00-60</li>
  <li>%w 星期几（0-6） 0 is sunday</li>
  <li>%W 一年中的第几周</li>
  <li>%x 日期（09/16/98）</li>
  <li>%X 时间（23:48:10）</li>
  <li>%y 两位数年份（88）</li>
  <li>%Y 完整的年份（1988）</li>
  <li>%z 时区（例如：-0300）</li>
  <li>%% 百分号</li>
</ol>

<h2 id="日期和时间的处理">日期和时间的处理</h2>
<p>os.difftime用来计算两个时间之间的差值，该函数以秒为单位返回差值。它的参数可以是两个日期表。
os.clock也是获取时间，但是其精度更高，返回值是一个浮点数。</p>
<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="n">t</span> <span class="o">=</span> <span class="nb">os.date</span><span class="p">(</span><span class="s2">&#34;*t&#34;</span><span class="p">)</span>
<span class="n">t</span><span class="p">.</span><span class="n">day</span> <span class="o">=</span> <span class="n">t</span><span class="p">.</span><span class="n">day</span> <span class="o">+</span> <span class="mi">40</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">os.date</span><span class="p">(</span><span class="s2">&#34;%Y/%m/%d&#34;</span><span class="p">,</span><span class="nb">os.time</span><span class="p">(</span><span class="n">t</span><span class="p">))</span> <span class="c1">--40天后的时间</span>

</pre></td></tr></tbody></table></code></pre></div></div>



                <hr style="visibility: hidden;"/>
                
                <hr style="visibility: hidden;"/>