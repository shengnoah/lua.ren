---
layout: post
title: Lua程序设计（6） 
tags: [lua文章]
categories: [topic]
---
<p>Lua中的数据结构：数组、链表、队列等</p>

<h3 id="数组："><a href="#数组：" class="headerlink" title="数组："></a>数组：</h3><p>在Lua语言中使用整数来索引表就可以实现数组，因此数组的大小不用非得是固定的，而是可以按需增长的。</p>
<p>在Lua语言中一般以1作为数组的起始索引。</p>
<h3 id="矩阵及多维数组："><a href="#矩阵及多维数组：" class="headerlink" title="矩阵及多维数组："></a>矩阵及多维数组：</h3><h4 id="使用一个不规则数组："><a href="#使用一个不规则数组：" class="headerlink" title="使用一个不规则数组："></a>使用一个不规则数组：</h4><p>即数组的数组，一个所有元素均是另一个表的表。</p>
<p>这种矩阵在创建时必须显式的创建每一行，一方面更加具体，另一方面增加了更多的灵活性。</p>
<h4 id="将两个索引合并为一个："><a href="#将两个索引合并为一个：" class="headerlink" title="将两个索引合并为一个："></a>将两个索引合并为一个：</h4><p>我们通过将第一个索引乘以一个合适的常量再加上第二个索引来实现这种效果，在这种方式下，我们可以使用以下的代码来创建一个全0元素的N*M矩阵：</p>
<figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/><span class="line">7</span><br/></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> mt = {}</span><br/><span class="line"><span class="keyword">for</span> i = <span class="number">1</span>,N <span class="keyword">do</span></span><br/><span class="line">	<span class="keyword">local</span> aux = (i - <span class="number">1</span>) * M</span><br/><span class="line">	<span class="keyword">for</span> j = <span class="number">1</span>,M <span class="keyword">do</span></span><br/><span class="line">		mt[aux + j] = <span class="number">0</span></span><br/><span class="line">	<span class="keyword">end</span></span><br/><span class="line"><span class="keyword">end</span></span><br/></pre></td></tr></tbody></table></figure>
<h3 id="链表："><a href="#链表：" class="headerlink" title="链表："></a>链表：</h3><p>我们可以把每个节点用一个表来表示，链接则为一个包含指向其他表的引用的简单表字段：</p>
<p>根结点：<code>list = nil</code></p>
<p>在表头插入一个值为v的元素：</p>
<figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/></pre></td><td class="code"><pre><span class="line">list = {<span class="built_in">next</span> = list,value = v}</span><br/></pre></td></tr></tbody></table></figure>
<p>遍历链表：</p>
<figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> l = list</span><br/><span class="line"><span class="keyword">while</span> l <span class="keyword">do</span></span><br/><span class="line">	visit l.value</span><br/><span class="line">	l = l.<span class="built_in">next</span></span><br/><span class="line"><span class="keyword">end</span></span><br/></pre></td></tr></tbody></table></figure>
<h3 id="队列及双端队列："><a href="#队列及双端队列：" class="headerlink" title="队列及双端队列："></a>队列及双端队列：</h3><p>一种简单的方法是使用table标准库中的函数insert和remove，不过这种移动对于较大的结构来说开销很大。</p>
<p>一种更高效的实现是使用两个索引，一个指向第一个元素，另一个指向最后一个元素，这样就可以以O(1)时间复杂度同时在首尾两端插入或删除元素了。</p>