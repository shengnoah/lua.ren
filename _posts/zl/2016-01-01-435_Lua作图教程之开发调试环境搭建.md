---
layout: post
title: Lua作图教程之开发调试环境搭建 
tags: [lua文章]
categories: [topic]
---
<p>5.1 以后就没有很好的lua IDE可用了，luastudio不错但是小贵，发现有位仁兄写了个 visual studio code的lua调试插件，试了一下还不错 <a href="https://github.com/actboy168/vscode-lua-debug" target="_blank" rel="noopener noreferrer">插件源码</a>.</p>

<h4 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h4><ul>
<li><p>去微软官方下载vscode <a href="https://code.visualstudio.com/" target="_blank" rel="noopener noreferrer">软件下载地址</a>.</p>
</li>
<li><p>安装Lua 5.3 Debug 插件，在vscode中按Ctrl+P，输入 ext install lua-debug </p>
</li>
</ul>
<p><img src="https://img-blog.csdn.net/20161104010436388" alt=""/></p>
<ul>
<li>vscode的调试需要在一个文件夹中，随便建一个文件夹比如叫luaproject 里面建一个lua文件叫run.lua</li>
<li><p>配置调试工具 </p>
<p>  打开lua的调试配置 </p>
</li>
</ul>
<p><img src="https://img-blog.csdn.net/20161104010854688" alt=""/></p>
<p><img src="https://img-blog.csdn.net/20161104010908407" alt=""/></p>
<p>直接调试lua文件修改lanuce里面的program项</p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/><span class="line">7</span><br/><span class="line">8</span><br/><span class="line">9</span><br/><span class="line">10</span><br/><span class="line">11</span><br/><span class="line">12</span><br/><span class="line">13</span><br/><span class="line">14</span><br/><span class="line">15</span><br/><span class="line">16</span><br/><span class="line">17</span><br/><span class="line">18</span><br/><span class="line">19</span><br/><span class="line">20</span><br/><span class="line">21</span><br/><span class="line">22</span><br/><span class="line">23</span><br/><span class="line">24</span><br/><span class="line">25</span><br/><span class="line">26</span><br/><span class="line">27</span><br/><span class="line">28</span><br/><span class="line">29</span><br/><span class="line">30</span><br/><span class="line">31</span><br/></pre></td><td class="code"><pre><span class="line">    {</span><br/><span class="line">    <span class="attr">&#34;version&#34;</span>: <span class="string">&#34;0.2.0&#34;</span>,</span><br/><span class="line">    <span class="attr">&#34;configurations&#34;</span>: [</span><br/><span class="line">        {</span><br/><span class="line">            <span class="attr">&#34;name&#34;</span>: <span class="string">&#34;launch&#34;</span>,</span><br/><span class="line">            <span class="attr">&#34;type&#34;</span>: <span class="string">&#34;lua&#34;</span>,</span><br/><span class="line">            <span class="attr">&#34;request&#34;</span>: <span class="string">&#34;launch&#34;</span>,</span><br/><span class="line">            <span class="attr">&#34;stopOnEntry&#34;</span>: <span class="literal">true</span>,</span><br/><span class="line">            <span class="attr">&#34;program&#34;</span>: <span class="string">&#34;${workspaceRoot}/run.lua&#34;</span>,</span><br/><span class="line">            <span class="attr">&#34;cwd&#34;</span>: <span class="string">&#34;${workspaceRoot}&#34;</span>,</span><br/><span class="line">            <span class="attr">&#34;path&#34;</span>: <span class="string">&#34;${workspaceRoot}/?.lua&#34;</span>,</span><br/><span class="line">            <span class="attr">&#34;cpath&#34;</span>: <span class="string">&#34;${workspaceRoot}/?.dll&#34;</span>,</span><br/><span class="line">            <span class="attr">&#34;arg&#34;</span>: [],</span><br/><span class="line">            <span class="attr">&#34;console&#34;</span>: <span class="string">&#34;ansi&#34;</span></span><br/><span class="line">        },</span><br/><span class="line">        {</span><br/><span class="line">            <span class="attr">&#34;name&#34;</span>: <span class="string">&#34;attach&#34;</span>,</span><br/><span class="line">            <span class="attr">&#34;type&#34;</span>: <span class="string">&#34;lua&#34;</span>,</span><br/><span class="line">            <span class="attr">&#34;request&#34;</span>: <span class="string">&#34;attach&#34;</span>,</span><br/><span class="line">            <span class="attr">&#34;stopOnEntry&#34;</span>: <span class="literal">true</span>,</span><br/><span class="line">            <span class="attr">&#34;ip&#34;</span>: <span class="string">&#34;localhost&#34;</span>,</span><br/><span class="line">            <span class="attr">&#34;port&#34;</span>: <span class="number">4278</span>,</span><br/><span class="line">            <span class="attr">&#34;sourceMaps&#34;</span>: [</span><br/><span class="line">                [</span><br/><span class="line">                    <span class="string">&#34;./&#34;</span>,</span><br/><span class="line">                    <span class="string">&#34;${workspaceRoot}&#34;</span></span><br/><span class="line">                ]</span><br/><span class="line">            ]</span><br/><span class="line">        }</span><br/><span class="line">    ]</span><br/><span class="line">}</span><br/></pre></td></tr></tbody></table></figure>
<p><img src="https://img-blog.csdn.net/20161104011657300" alt=""/></p>
<ul>
<li>开始调试 </li>
</ul>
<p>如果”stopOnEntry”: true 则进入调试状态便断在开头 按F5直接运行到打断点的地方。可以方便的查看这个变量的值和运行状态 </p>
<p><img src="https://img-blog.csdn.net/20161104011855937" alt=""/></p>
<h3 id="lua调试器详细说明"><a href="#lua调试器详细说明" class="headerlink" title="lua调试器详细说明"></a>lua调试器详细说明</h3><h5 id="模块功能"><a href="#模块功能" class="headerlink" title="模块功能"></a>模块功能</h5><p>vscode-debug-client.exe 代理客户端。在launch模式中，vscode-debug-client.exe会用vscode-debug.dll创建一个调试器进行调试。</p>
<p>在attach模式中，vscode-debug-client.exe会连接一个远程的调试器(也是由vscode-debug.dll创建的)，vscode-debug-client.exe只负责在vscode-debug.dll和vscode之间转发消息。</p>
<p>vscode-debug.dll 调试器的核心模块。你可以在你的程序中加载vscode-debug.dll并创建调试器，这样vscode就可以通过attach模式进行调试。</p>
<p>luacore.dll lua核心模块。如果你的程序定制了lua，你可以替换掉它。</p>
<h3 id="配置launch-json"><a href="#配置launch-json" class="headerlink" title="配置launch.json"></a>配置launch.json</h3><h5 id="launch模式，等同于使用lua-exe来执行你的代码。"><a href="#launch模式，等同于使用lua-exe来执行你的代码。" class="headerlink" title="launch模式，等同于使用lua.exe来执行你的代码。"></a>launch模式，等同于使用lua.exe来执行你的代码。</h5><p>program，lua.exe执行的入口文件</p>
<p>cwd，lua.exe的当前目录</p>
<p>stopOnEntry，开始调试时是否先暂停</p>
<p>luadll，指定lua dll的路径，如有不填会加载luacore.dll</p>
<p>path，用于初始化package.path</p>
<p>cpath，用于初始化package.cpath</p>
<p>arg，lua.exe的命令行参数，用于初始化arg</p>
<p>console，lua的标准输出的编码，可选择utf8、ansi、none，当是none时不会重定向标准输出到vscode</p>
<p>sourceMaps，一般不需要，作用同attach模式</p>