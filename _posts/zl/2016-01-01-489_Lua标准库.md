---
layout: post
title: Lua标准库 
tags: [lua文章]
categories: [topic]
---
<p>lua标准库之数学库</p>
<h3 id="数学库概念"><a href="#数学库概念" class="headerlink" title="数学库概念"></a>数学库概念</h3><p>数学库由算术函数的标准集合组成；比如三角函数（sin、cos、tan、asin、acos、etc）<br/>幂指函数（exp、log、log10），舍入函数（floor、ceil）、max、min，加上一个变量pi，数学库也定义了一个幂操作符 ^ </p>
<table>
<thead>
<tr>
<th style="text-align:center">函数</th>
<th style="text-align:center">描述</th>
<th style="text-align:center">示例</th>
<th style="text-align:center">结果</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">abs</td>
<td style="text-align:center">取绝对值</td>
<td style="text-align:center">math.abs(-15)</td>
<td style="text-align:center">15</td>
</tr>
<tr>
<td style="text-align:center">acos</td>
<td style="text-align:center">反余弦函数</td>
<td style="text-align:center">math.acos(0.5)</td>
<td style="text-align:center">1.04719755</td>
</tr>
<tr>
<td style="text-align:center">asin</td>
<td style="text-align:center">反正弦函数</td>
<td style="text-align:center">math.asin(0.5)</td>
<td style="text-align:center">0.52359877</td>
</tr>
<tr>
<td style="text-align:center">atan2</td>
<td style="text-align:center">x / y的反正切值</td>
<td style="text-align:center">math.atan2(90.0, 45.0)</td>
<td style="text-align:center">1.10714871</td>
</tr>
<tr>
<td style="text-align:center">atan</td>
<td style="text-align:center">反正切函数</td>
<td style="text-align:center">math.atan(0.5)</td>
<td style="text-align:center">0.463647609</td>
</tr>
<tr>
<td style="text-align:center">ceil</td>
<td style="text-align:center">不小于x的最大整数</td>
<td style="text-align:center">math.ceil(5.8)</td>
<td style="text-align:center">6</td>
</tr>
<tr>
<td style="text-align:center">cosh</td>
<td style="text-align:center">双曲线余弦函数</td>
<td style="text-align:center">math.cosh(0.5)</td>
<td style="text-align:center">1.276259652</td>
</tr>
<tr>
<td style="text-align:center">cos</td>
<td style="text-align:center">余弦函数</td>
<td style="text-align:center">math.cos(0.5)</td>
<td style="text-align:center">0.87758256</td>
</tr>
<tr>
<td style="text-align:center">deg</td>
<td style="text-align:center">弧度转角度</td>
<td style="text-align:center">math.deg(math.pi)</td>
<td style="text-align:center">180</td>
</tr>
<tr>
<td style="text-align:center">exp</td>
<td style="text-align:center">计算以e为底x次方值</td>
<td style="text-align:center">math.exp(2)</td>
<td style="text-align:center">2.718281828</td>
</tr>
<tr>
<td style="text-align:center">floor</td>
<td style="text-align:center">不大于x的最大整数</td>
<td style="text-align:center">math.floor(5.6)</td>
<td style="text-align:center">5</td>
</tr>
<tr>
<td style="text-align:center">fmod （mod）</td>
<td style="text-align:center">取模运算</td>
<td style="text-align:center">math.mod(14, 5)</td>
<td style="text-align:center">4</td>
</tr>
<tr>
<td style="text-align:center">frexp</td>
<td style="text-align:center">把双精度数val分解为数字部分（尾数）和以2为底的指数n，即val=x*2n</td>
<td style="text-align:center">math.frexp(10.0)</td>
<td style="text-align:center">0.625    4</td>
</tr>
<tr>
<td style="text-align:center">ldexp</td>
<td style="text-align:center">计算value * 2的n次方</td>
<td style="text-align:center">math.ldexp(10.0, 3)</td>
<td style="text-align:center">80 = 10 * (2 ^3)</td>
</tr>
<tr>
<td style="text-align:center">log10</td>
<td style="text-align:center">计算以10为基数的对数</td>
<td style="text-align:center">math.log10(100)</td>
<td style="text-align:center">2</td>
</tr>
<tr>
<td style="text-align:center">log</td>
<td style="text-align:center">计算一个数字的自然对数</td>
<td style="text-align:center">math.log(2.71)</td>
<td style="text-align:center">0.9969</td>
</tr>
<tr>
<td style="text-align:center">max</td>
<td style="text-align:center">取得参数中最大值</td>
<td style="text-align:center">math.max(2.71, 100, -98, 23)</td>
<td style="text-align:center">100</td>
</tr>
<tr>
<td style="text-align:center">min</td>
<td style="text-align:center">取得参数中最小值</td>
<td style="text-align:center">math.min(2.71, 100, -98, 23)</td>
<td style="text-align:center">-98</td>
</tr>
<tr>
<td style="text-align:center">modf</td>
<td style="text-align:center">把数分为整数和小数</td>
<td style="text-align:center">math.modf(15.98)</td>
<td style="text-align:center">15    98</td>
</tr>
<tr>
<td style="text-align:center">pow</td>
<td style="text-align:center">得到x的y次方</td>
<td style="text-align:center">math.pow(2, 5)</td>
<td style="text-align:center">32</td>
</tr>
<tr>
<td style="text-align:center">rad</td>
<td style="text-align:center">角度转弧度</td>
<td style="text-align:center">math.rad(180)</td>
<td style="text-align:center">3.14159265358</td>
</tr>
<tr>
<td style="text-align:center">random</td>
<td style="text-align:center">获取随机数</td>
<td style="text-align:center">math.random(1, 100) math.random(100)</td>
<td style="text-align:center">获取1-100的随机数</td>
</tr>
<tr>
<td style="text-align:center">randomseed</td>
<td style="text-align:center">设置随机数种子</td>
<td style="text-align:center">math.randomseed(os.time())</td>
<td style="text-align:center">在使用math.random函数之前必须使用此函数设置随机数种子</td>
</tr>
<tr>
<td style="text-align:center">sinh</td>
<td style="text-align:center">双曲线正弦函数</td>
<td style="text-align:center">math.sinh(0.5)</td>
<td style="text-align:center">0.5210953</td>
</tr>
<tr>
<td style="text-align:center">sin</td>
<td style="text-align:center">正弦函数</td>
<td style="text-align:center">math.sin(math.rad(30))</td>
<td style="text-align:center">0.5</td>
</tr>
<tr>
<td style="text-align:center">sqrt</td>
<td style="text-align:center">开平方函数</td>
<td style="text-align:center">math.sqrt(16)</td>
<td style="text-align:center">4</td>
</tr>
<tr>
<td style="text-align:center">tanh</td>
<td style="text-align:center">双曲线正切函数</td>
<td style="text-align:center">math.tanh(0.5)</td>
<td style="text-align:center">0.46211715</td>
</tr>
<tr>
<td style="text-align:center">tan</td>
<td style="text-align:center">正切函数</td>
<td style="text-align:center">math.tan(0.5)</td>
<td style="text-align:center">0.5463024</td>
</tr>
</tbody>
</table>
<h3 id="math-random"><a href="#math-random" class="headerlink" title="math.random"></a>math.random</h3><p>产生伪随机数，有三种调用方式<br/>第一：不带参数，产生[0，1)范围内的随机数<br/></p><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">math</span>.<span class="built_in">random</span>())     </span><br/></pre></td></tr></tbody></table></figure><p></p>
<p>第二：带一个参数n，将产生1到n内的随机数（包括1和n）<br/></p><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">math</span>.<span class="built_in">random</span>(<span class="number">80</span>))     <span class="comment">-- 45</span></span><br/></pre></td></tr></tbody></table></figure><p></p>
<p>第三：带两个参数m和n，将产生m到n内的随机数（包含m和n）<br/></p><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">math</span>.<span class="built_in">random</span>(<span class="number">1</span>,<span class="number">80</span>))     <span class="comment">-- 16</span></span><br/></pre></td></tr></tbody></table></figure><p></p>
<h3 id="math-randomseed"><a href="#math-randomseed" class="headerlink" title="math.randomseed"></a>math.randomseed</h3><p>random的伪随机原理：在程序开始时，他是使用固定的种子初始化随机数发生器，使得每次运行都会拥有相同的关卡<br/>解决方法，使用系统时间作为种子，通常放在脚本最开始的位置math.randomseed(os.time())<br/></p><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/></pre></td><td class="code"><pre><span class="line"><span class="built_in">math</span>.<span class="built_in">randomseed</span>(<span class="built_in">os</span>.<span class="built_in">time</span>())</span><br/><span class="line"><span class="keyword">for</span> i  = <span class="number">1</span>,<span class="number">5</span> <span class="keyword">do</span></span><br/><span class="line">     <span class="built_in">print</span>(<span class="built_in">math</span>.<span class="built_in">random</span>(<span class="number">1</span>,<span class="number">10</span>))</span><br/><span class="line"><span class="keyword">end</span></span><br/></pre></td></tr></tbody></table></figure><p></p>
<h3 id="math-abs"><a href="#math-abs" class="headerlink" title="math.abs"></a>math.abs</h3><p>math.abs(X) 返回X的绝对值，通常在时间戳的计算上使用率最高<br/></p><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> n = <span class="built_in">os</span>.<span class="built_in">time</span>()</span><br/><span class="line"><span class="keyword">for</span> k = <span class="number">1</span>,<span class="number">10000000000</span> <span class="keyword">do</span></span><br/><span class="line"><span class="keyword">end</span></span><br/><span class="line"><span class="keyword">local</span> new = <span class="built_in">os</span>.<span class="built_in">time</span>()</span><br/><span class="line"><span class="built_in">print</span>(<span class="built_in">math</span>.<span class="built_in">abs</span>(new-n))     <span class="comment">-- 30(单位秒)</span></span><br/></pre></td></tr></tbody></table></figure><p></p>
<h3 id="math-floor"><a href="#math-floor" class="headerlink" title="math.floor"></a>math.floor</h3><p>math.floor(X) 函数返回不大于参数X的最大整数<br/></p><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">math</span>.<span class="built_in">floor</span>(<span class="number">5.2</span>))     <span class="comment">-- 5</span></span><br/><span class="line"><span class="built_in">print</span>(<span class="built_in">math</span>.<span class="built_in">floor</span>(<span class="number">-5.2</span>))     <span class="comment">-- -6</span></span><br/></pre></td></tr></tbody></table></figure><p></p>
<h3 id="math-ceil"><a href="#math-ceil" class="headerlink" title="math.ceil"></a>math.ceil</h3><p>math.ceil(X) 函数返回不小于参数X的最大整数<br/></p><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">math</span>.<span class="built_in">ceil</span>(<span class="number">5.2</span>))     <span class="comment">-- 6</span></span><br/><span class="line"><span class="built_in">print</span>(<span class="built_in">math</span>.<span class="built_in">ceil</span>(<span class="number">-5.2</span>))     <span class="comment">-- -5</span></span><br/></pre></td></tr></tbody></table></figure><p></p>
<h3 id="math-sqrt"><a href="#math-sqrt" class="headerlink" title="math.sqrt"></a>math.sqrt</h3><p>math.sqrt(X) 返回参数X的平方根或1/2方根 如果X为负，产生域错误<br/></p><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(maht.<span class="built_in">sqrt</span>(<span class="number">16</span>))     <span class="comment">-- 4</span></span><br/></pre></td></tr></tbody></table></figure><p></p>
<h3 id="math-fmod"><a href="#math-fmod" class="headerlink" title="math.fmod"></a>math.fmod</h3><p>math.fmod(X,Y) 返回参数X/Y的余数<br/></p><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">math</span>.<span class="built_in">fmod</span>(<span class="number">55</span>,<span class="number">50</span>))     <span class="comment">--5</span></span><br/></pre></td></tr></tbody></table></figure><p></p>
<h3 id="math-modf"><a href="#math-modf" class="headerlink" title="math.modf"></a>math.modf</h3><p>math.modf(X) 将参数X分割为整数和小数，返回两个值<br/></p><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">math</span>.<span class="built_in">modf</span>(<span class="number">5.3</span>))     <span class="comment">--5 0.3</span></span><br/></pre></td></tr></tbody></table></figure><p></p>
<h3 id="math-max"><a href="#math-max" class="headerlink" title="math.max"></a>math.max</h3><p>math.max(X…)函数返回所有参数最大值<br/></p><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">math</span>.<span class="built_in">max</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>))     <span class="comment">-- 5</span></span><br/></pre></td></tr></tbody></table></figure><p></p>
<h3 id="math-mim"><a href="#math-mim" class="headerlink" title="math.mim"></a>math.mim</h3><p>math.min(X…)函数返回所有参数的最小值<br/></p><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">math</span>.<span class="built_in">min</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>))     <span class="comment">-- 1</span></span><br/></pre></td></tr></tbody></table></figure><p></p>