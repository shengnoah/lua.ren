---
layout: post
title: lua求列表所有数的和 
tags: [lua文章]
categories: [topic]
---
<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="o">#</span><span class="err">!</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">env</span> <span class="n">lua</span>

<span class="c1">--table.reduce = function (list, fn)</span>
<span class="c1">--有趣的地方是fn参数也可以是一个函数</span>
<span class="c1">--这个函数是将列表值来相加得到和</span>
<span class="n">abc</span> <span class="o">=</span> <span class="k">function</span> <span class="p">(</span><span class="n">list</span><span class="p">,</span> <span class="n">fn</span><span class="p">)</span>
	<span class="kd">local</span> <span class="n">acc</span>
	<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="k">in</span> <span class="nb">ipairs</span><span class="p">(</span><span class="n">list</span><span class="p">)</span> <span class="k">do</span>
		<span class="k">if</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">k</span> <span class="k">then</span>
			<span class="n">acc</span> <span class="o">=</span> <span class="n">v</span>
		<span class="k">else</span>
			<span class="n">acc</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">acc</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
		<span class="k">end</span>
	<span class="k">end</span>
	<span class="k">return</span> <span class="n">acc</span>
<span class="k">end</span>

<span class="nb">print</span><span class="p">(</span><span class="n">abc</span><span class="p">(</span>
<span class="c1">--print(table.reduce(</span>
<span class="p">{</span><span class="mi">100</span><span class="p">,</span> <span class="mi">210</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mi">133</span><span class="p">,</span> <span class="mi">140</span><span class="p">,</span> <span class="mi">166</span><span class="p">,</span> <span class="mi">199</span><span class="p">},</span>
<span class="c1">--这里将abc函数中的fn参数作为一个求和的函数来处理</span>
<span class="k">function</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
	<span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="k">end</span>
<span class="p">))</span>

</code></pre></div></div>