---
layout: post
title: Lua Study 
tags: [lua文章]
categories: [topic]
---
<p>本文并不会把Lua语言的所有内容都包含在内，只对个人学习过程中感觉比较重要的部分做一个记录，以便回顾。</p>
<ol>
<li><p>类型<br/>学习语言首先要了解它提供的类型，Lua语言提供了如下几种。</p>
<ul>
<li>nil</li>
<li>boolean</li>
<li>number</li>
<li>string</li>
<li>userdata</li>
<li>function</li>
<li>thread</li>
<li>table<br/>Lua中只有nil和boolean中的false视为条件（条件表达式中的条件）假，其他任何值都表示真。<br/>number可以表示任何32位整数。<br/>String表示不可变（immutable）的字符串，转义使用””符号，用..来连接字符串。<br/>table是Lua唯一的数据结构机制。可以理解为Hash表加上可变长数组（不加键默认从1开始计数）。<br/>talbe的两种存、取值方式<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/></pre></td><td class="code"><pre><span class="line">testTable = {</span><br/><span class="line">  [&#34;a&#34;] = &#34;value1&#34;,</span><br/><span class="line">  b = &#34;value2&#34;</span><br/><span class="line">}</span><br/><span class="line">testTable[&#34;a&#34;]</span><br/><span class="line">testTable.b</span><br/></pre></td></tr></tbody></table></figure>
</li>
</ul>
<p>function是“第一类值”，支持函数式编程。</p>
</li>
<li><p>表达式</p>
<ul>
<li>数字常量</li>
<li>字面字符串</li>
<li>变量</li>
<li>操作符<ul>
<li>算数操作符  “-“,”+”,”-“,”*”,”/“,”^”,”%”</li>
<li>关系操作符  “&lt;”,”&gt;”,”&lt;=”,”&gt;=”,”==”,”~=”</li>
<li>逻辑操作符  and,or,not</li>
<li>字符串连接  ..</li>
</ul>
</li>
<li>函数调用</li>
</ul>
</li>
<li><p>语句<br/>do和end表示一个语句块</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/></pre></td><td class="code"><pre><span class="line">do</span><br/><span class="line">  ...</span><br/><span class="line">end</span><br/></pre></td></tr></tbody></table></figure>
<p>数字型for</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/></pre></td><td class="code"><pre><span class="line">b = {1,4,6,3,9}</span><br/><span class="line">for i=1, #b, 1 do</span><br/><span class="line">  print(b[i])</span><br/><span class="line">end</span><br/></pre></td></tr></tbody></table></figure>
<p>泛型for<br/><code>for k,v in ipairs(a) do print(v) end</code><br/>ipairs遍历数组，若使用pairs函数则遍历table中的所有的元素。</p>
</li>
<li>函数<br/>支持变长参数（用…表示），尾递归。函数的返回值可以有多个。<br/><code>o.foo(o, x)</code><br/>等价于<br/><code>o:foo(x)</code></li>
<li>元表Metatable与元方法Meatmethod<br/>待补充</li>
<li>协同程序coroutine<br/>待补充</li>
<li>弱引用table<br/>待补充<blockquote></blockquote>
</li>
</ol>