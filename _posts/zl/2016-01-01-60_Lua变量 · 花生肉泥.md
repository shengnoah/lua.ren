---
layout: post
title: Lua变量 · 花生肉泥 
tags: [lua文章]
categories: [topic]
---
<p>lua中有三种变量：全局变量，局部变量，还有table的域</p>
<p>在变量的首次赋值之前，变量的值均为nil</p>
<h3 id="全局变量"><a href="#全局变量" class="headerlink" title="全局变量"></a>全局变量</h3><p>全局变量不需要声明，给一个变量赋值后即创建了这个全局变量，访问一个没有初始化的全局变量也不会出错，只不过得到的结果是：nil<br/></p><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(a)     </span><br/><span class="line">a = <span class="number">1</span></span><br/><span class="line"><span class="built_in">print</span>(a)     <span class="comment">-- 1</span></span><br/></pre></td></tr></tbody></table></figure><p></p>
<p>当你想删除一个全局变量，只需要将变量赋值为nil</p>
<p>当且仅当一个变量不等于nil时，这个变量存在</p>
<h3 id="局部变量"><a href="#局部变量" class="headerlink" title="局部变量"></a>局部变量</h3><p>局部变量有其作用范围，局部变量可以被定义在它作用范围中的函数自由使用，局部变量可以在语句块总任何地方申明，应该尽可能的使用局部变量，好处有两个</p>
<p>1.避免命名冲突</p>
<p>2.访问局部变量的速度比全局变量更快<br/></p><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/><span class="line">7</span><br/><span class="line">8</span><br/><span class="line">9</span><br/><span class="line">10</span><br/><span class="line">11</span><br/><span class="line">12</span><br/><span class="line">13</span><br/><span class="line">14</span><br/><span class="line">15</span><br/><span class="line">16</span><br/><span class="line">17</span><br/></pre></td><td class="code"><pre><span class="line">a = <span class="number">5</span>     <span class="comment">-- 全局变量</span></span><br/><span class="line"><span class="keyword">local</span> b = <span class="number">5</span>     <span class="comment">-- 局部变量</span></span><br/><span class="line"></span><br/><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br/><span class="line">     c = <span class="number">5</span>     <span class="comment">-- 全局变量</span></span><br/><span class="line">     <span class="keyword">local</span> d = <span class="number">6</span>     <span class="comment">-- 局部变量</span></span><br/><span class="line"><span class="keyword">end</span></span><br/><span class="line"></span><br/><span class="line">joke()</span><br/><span class="line"><span class="built_in">print</span>(c,d)     <span class="comment">-- 5 nil</span></span><br/><span class="line"></span><br/><span class="line"><span class="keyword">do</span></span><br/><span class="line">     <span class="keyword">local</span> a = <span class="number">6</span>     <span class="comment">-- 局部变量</span></span><br/><span class="line">     b = <span class="number">6</span>     <span class="comment">--全局变量</span></span><br/><span class="line">     <span class="built_in">print</span>(a,b)     <span class="comment">-- 6 6</span></span><br/><span class="line"><span class="keyword">end</span></span><br/><span class="line"><span class="built_in">print</span>(a,b)     <span class="comment">-- 5 6</span></span><br/></pre></td></tr></tbody></table></figure><p></p>