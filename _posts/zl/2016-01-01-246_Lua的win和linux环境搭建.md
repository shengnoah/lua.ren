---
layout: post
title: Lua的win和linux环境搭建 
tags: [lua文章]
categories: [topic]
---

      
      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="https://hulinhong.com/2015/11/03/Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86%E4%B9%8Btcpdump/" rel="next" title="Linux常用命令笔记整理之tcpdump">
                <i class="fa fa-chevron-left"></i> 
                <p class="post-nav-pre-next-title">
                  Linux常用命令笔记整理之tcpdump
                </p> 
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="https://hulinhong.com/2015/11/10/kmp/" rel="prev" title="KMP查找子字符串">
              <p class="post-nav-pre-next-title">
                  KMP查找子字符串
              </p> 
              <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      

      
      

      
        <p><strong>. . .</strong></p>
<h2 id="测试文档"><a href="https://hulinhong.com/#%E6%B5%8B%E8%AF%95%E6%96%87%E4%BB%B6" class="headerlink" title="测试文档"></a>测试文档</h2><figure class="highlight c++"><figcaption><span>a.cpp</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extern</span> <span class="string">"C"</span> {</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"lauxlib.h"</span></span></span><br><span class="line">};  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    lua_State *L = luaL_newstate();</span><br><span class="line">    luaL_openlibs(L);</span><br><span class="line">    luaL_dostring(L, <span class="string">"print('hello, '.._VERSION)"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="lua5-1"><a href="https://hulinhong.com/#lua5-1" class="headerlink" title="lua5.1"></a>lua5.1</h2><pre><code>sudo apt-get install lua5.1
sudo apt-get install liblua5.1-0-dev
</code></pre><p>编译命令 : <code>gcc a.cpp -I/usr/include/lua5.1 -llua5.1 -lm</code></p>
<p>生成 a.out 之后, 运行 a.out, 若打印 <code>hello, Lua 5.1</code> 即为安装成功.</p>
<h2 id="lua5-3"><a href="https://hulinhong.com/#lua5-3" class="headerlink" title="lua5.3"></a>lua5.3</h2><pre><code>sudo apt-get install libreadline-dev
sudo curl -R -O http://www.lua.org/ftp/lua-5.3.0.tar.gz
sudo tar zxf lua-5.3.0.tar.gz
sudo cd lua-5.3.0
sudo make linux test
sudo make install
</code></pre><p>编译命令 : <code>g++ a.cpp -llua -ldl</code></p>
<p>生成 a.out 之后, 运行 a.out, 若打印 <code>hello, Lua 5.3</code> 即为安装成功.</p>
<h2 id="luajit"><a href="https://hulinhong.com/#luajit" class="headerlink" title="luajit"></a>luajit</h2>
<p>//下载<br>git clone <a href="http://luajit.org/git/luajit-2.0.git" target="_blank" rel="noopener noreferrer">http://luajit.org/git/luajit-2.0.git</a><br>tar zxf LuaJIT-2.0.4.tar.gz<br>cd LuaJIT-2.0.4<br>//linux下编译<br>make<br>//安装<br>sudo make install<br>luajit -v<br>出现版权信息即为安装成功。</p>
<h2 id="luarocks"><a href="https://hulinhong.com/#luarocks" class="headerlink" title="luarocks"></a>luarocks</h2><p>到luarocks的官网下载luarocks, 直接apt-get的已经太老旧, 默认的配置文档有错</p>
<p>luarocks 命令：</p>
<ul>
<li><p>luarocks  build     XXX     建立/编译一个包</p>
</li>
<li><p>luarocks  download XXX   从rocks服务器下载一个指定文档或者包</p>
</li>
<li><p>luarocks  help                luarocks帮助</p>
</li>
<li><p>luarocks  install     XXX    安装包</p>
</li>
<li><p>luarocks  make      XXX    下载并编译包</p>
</li>
<li><p>luarocks  pack                打包</p>
</li>
<li><p>luarocks  list                   显示已安装的列表</p>
</li>
<li><p>luarocks  path                返回包地址</p>
</li>
<li><p>luarocks  remove  XXX     删除</p>
</li>
<li><p>luarocks  search               Query the LuaRocks repositories</p>
</li>
<li><p>luarocks    show                    Shows information about an installed rock.</p>
</li>
<li><p>luarocks    unpack                 Unpack the contents of a rock.</p>
</li>
</ul>
<h2 id="Install-lua-socket"><a href="https://hulinhong.com/#Install-lua-socket" class="headerlink" title="Install lua-socket"></a>Install lua-socket</h2><p>如果有安装 Lua 模块的安装和部署工具 – luarocks，</p>
<p>那么一条命令就能安装部署好 LuaSocket： </p>
<p>luarocks install luasocket</p>
<h2 id="关于json"><a href="https://hulinhong.com/#%E5%85%B3%E4%BA%8Ejson" class="headerlink" title="关于json"></a>关于json</h2><p>如果想安装一个解析 JSON(JavaScript Object Notation) 的模块，<br>可以用 search 参数先搜索一下有什么可安装的解析 JSON 的模块：</p>
<p>luarocks search json</p>
<p>假设想安装一个名为 json4lua 模块，可以用 install 参数来安装：</p>
<p>luarocks install json4lua</p>
<h1 id="Windows环境"><a href="https://hulinhong.com/#Windows%E7%8E%AF%E5%A2%83" class="headerlink" title="Windows环境"></a>Windows环境</h1><p>首先要安装一个微软依赖 : <a href="https://www.microsoft.com/en-us/download/details.aspx?id=3387&amp;fa43d42b-25b5-4a42-fe9b-1634f450f5ee=True" target="_blank" rel="noopener noreferrer">https://www.microsoft.com/en-us/download/details.aspx?id=3387&amp;fa43d42b-25b5-4a42-fe9b-1634f450f5ee=True</a></p>
<p>然后安装lua for windows : </p>
<ul>
<li><a href="http://www.runoob.com/lua/lua-environment.html" target="_blank" rel="noopener noreferrer">http://www.runoob.com/lua/lua-environment.html</a> </li>
<li>或 <a href="http://luaforge.net/projects/luaforwindows/" target="_blank" rel="noopener noreferrer">http://luaforge.net/projects/luaforwindows/</a></li>
</ul>