---
layout: post
title: Lua函数 · 花生肉泥 
tags: [lua文章]
categories: [topic]
---
<h3 id="函数的构建"><a href="#函数的构建" class="headerlink" title="函数的构建"></a>函数的构建</h3><p>lua编程语言函数定义格式如下：<br/></p><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/></pre></td><td class="code"><pre><span class="line">optional_function_scope <span class="function"><span class="keyword">function</span>  <span class="params">(argument1,argument2,argument3...,argumentn)</span></span></span><br/><span class="line">     function_body</span><br/><span class="line">     <span class="keyword">return</span> result_parames_comma_separated</span><br/><span class="line"><span class="keyword">end</span></span><br/></pre></td></tr></tbody></table></figure><p></p>
<p>【解析】</p>
<p>optional_function_scope：<br/>该参数是否选的制定函数是全局函数还是局部函数，未设置该参数默认为全局函数，如果你需要设置函数为局部函数需要关键字local</p>
<p>function_name：<br/>指定函数名称</p>
<p>argument1,argument2,argument3…argumentn：<br/>函数参数，多个参数以逗号隔开，函数也可以不带参数</p>
<p>function_body：<br/>函数体，函数中需要执行的代码语句块</p>
<p>return_params_comma_separated;<br/>函数返回值，lua语言函数可以返回多个值，每个值以逗号隔开<br/></p><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/><span class="line">7</span><br/><span class="line">8</span><br/><span class="line">9</span><br/><span class="line">10</span><br/><span class="line">11</span><br/><span class="line">12</span><br/><span class="line">13</span><br/><span class="line">14</span><br/><span class="line">15</span><br/><span class="line">16</span><br/><span class="line">17</span><br/><span class="line">18</span><br/><span class="line">19</span><br/></pre></td><td class="code"><pre><span class="line"></span><br/><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">max</span><span class="params">(num1,num2)</span></span></span><br/><span class="line">     <span class="keyword">if</span>(num1 &gt; num1) <span class="keyword">then</span></span><br/><span class="line">          a = num1</span><br/><span class="line">     <span class="keyword">else</span></span><br/><span class="line">          a = num2</span><br/><span class="line">     <span class="keyword">end</span></span><br/><span class="line">     <span class="keyword">return</span> a</span><br/><span class="line"><span class="keyword">end</span></span><br/><span class="line"></span><br/><span class="line"><span class="comment">-- 调用函数</span></span><br/><span class="line"><span class="built_in">print</span>(<span class="string">&#34;两值比较最大值为：&#34;</span>,<span class="built_in">max</span>(<span class="number">10</span>,<span class="number">6</span>))</span><br/><span class="line"><span class="built_in">print</span>(<span class="string">&#34;两值比较最大值为：&#34;</span>,<span class="built_in">max</span>(<span class="number">1</span>,<span class="number">6</span>))</span><br/><span class="line"></span><br/><span class="line"></span><br/><span class="line"></span><br/><span class="line">=====结果=====</span><br/><span class="line">两值比较最大值为：<span class="number">10</span></span><br/><span class="line">两值比较最大值为：<span class="number">6</span></span><br/></pre></td></tr></tbody></table></figure><p></p>
<figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/><span class="line">7</span><br/><span class="line">8</span><br/><span class="line">9</span><br/><span class="line">10</span><br/><span class="line">11</span><br/><span class="line">12</span><br/><span class="line">13</span><br/></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">()</span></span></span><br/><span class="line">     <span class="built_in">print</span>(<span class="string">&#34;true&#34;</span>)</span><br/><span class="line"><span class="keyword">end</span></span><br/><span class="line"></span><br/><span class="line"><span class="built_in">print</span>(foo)</span><br/><span class="line"><span class="built_in">print</span>(foo())</span><br/><span class="line"></span><br/><span class="line"></span><br/><span class="line"></span><br/><span class="line"></span><br/><span class="line">=====结果=====</span><br/><span class="line"><span class="function"><span class="keyword">function</span>:00000000005<span class="title">DDCA0</span></span></span><br/><span class="line"><span class="function"><span class="title">true</span></span></span><br/></pre></td></tr></tbody></table></figure>
<p>如果参数列表为空，必须使用()表明是函数调用</p>
<p>如果函数只有一个参数，且为字符串或表结构，()可有可无：print “true”</p>
<h3 id="多返回值"><a href="#多返回值" class="headerlink" title="多返回值"></a>多返回值</h3><p>lua函数可以返回多个结果值，在return后列出要返回的值的列表即可返回多值<br/></p><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/><span class="line">7</span><br/><span class="line">8</span><br/><span class="line">9</span><br/><span class="line">10</span><br/><span class="line">11</span><br/><span class="line">12</span><br/><span class="line">13</span><br/><span class="line">14</span><br/><span class="line">15</span><br/><span class="line">16</span><br/><span class="line">17</span><br/><span class="line">18</span><br/><span class="line">19</span><br/></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">maximum</span><span class="params">(a)</span></span></span><br/><span class="line">     <span class="keyword">local</span> mi = <span class="number">1</span></span><br/><span class="line">     <span class="keyword">local</span> m = a[mi]</span><br/><span class="line">     <span class="keyword">for</span> i,val <span class="keyword">in</span> <span class="built_in">ipairs</span>(a) <span class="keyword">do</span></span><br/><span class="line">          <span class="keyword">if</span> val &gt; m <span class="keyword">then</span></span><br/><span class="line">               mi = i</span><br/><span class="line">               m = val</span><br/><span class="line">          <span class="keyword">end</span></span><br/><span class="line">     <span class="keyword">end</span></span><br/><span class="line">     <span class="keyword">return</span> m,mi</span><br/><span class="line"><span class="keyword">end</span></span><br/><span class="line"></span><br/><span class="line"><span class="built_in">print</span>(maximum({<span class="number">8</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">23</span>,<span class="number">15</span>,<span class="number">5</span>}))</span><br/><span class="line"></span><br/><span class="line"></span><br/><span class="line"></span><br/><span class="line"></span><br/><span class="line">=====结果=====</span><br/><span class="line"><span class="number">23</span>     <span class="number">4</span></span><br/></pre></td></tr></tbody></table></figure><p></p>
<p>lua总是调整函数返回值的个数以适用调用环境，当作为独立的语句调用函数时，所有返回值将被忽略<br/>假设有如下三个函数：<br/></p><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo0</span> <span class="params">()</span></span> <span class="keyword">end</span>     <span class="comment">-- return no results</span></span><br/><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo1</span> <span class="params">()</span></span> <span class="keyword">return</span> <span class="string">&#39;a&#39;</span> <span class="keyword">end</span>     <span class="comment">-- retuens 1 result</span></span><br/><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo2</span> <span class="params">()</span></span> <span class="keyword">return</span> <span class="string">&#39;a&#39;</span>,<span class="string">&#39;b&#39;</span> <span class="keyword">end</span>     <span class="comment">-- returns 2 results</span></span><br/></pre></td></tr></tbody></table></figure><p></p>
<p>第一，当作为表达式调用函数时，有以下几种情况：</p>
<p>当调用作为表达式最后一个参数或者仅有一个参数时，根据变量个数函数尽可能多地返回多个值，不足补nil，超出舍去</p>
<p>在其他情况下，函数调用仅返回第一个值（如果没有返回值为nil）<br/></p><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/><span class="line">7</span><br/><span class="line">8</span><br/><span class="line">9</span><br/><span class="line">10</span><br/><span class="line">11</span><br/><span class="line">12</span><br/></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo0</span> <span class="params">()</span></span> <span class="keyword">end</span>     <span class="comment">-- return no results</span></span><br/><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo1</span> <span class="params">()</span></span> <span class="keyword">return</span> <span class="string">&#39;a&#39;</span> <span class="keyword">end</span>     <span class="comment">-- retuens 1 result</span></span><br/><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo2</span> <span class="params">()</span></span> <span class="keyword">return</span> <span class="string">&#39;a&#39;</span>,<span class="string">&#39;b&#39;</span> <span class="keyword">end</span>     <span class="comment">-- returns 2 results</span></span><br/><span class="line"></span><br/><span class="line">x,y = foo2()     <span class="comment">-- x=&#39;a&#39;,y=&#39;b&#39;</span></span><br/><span class="line">x = foo2()     <span class="comment">--x=&#39;a&#39;,&#39;b&#39; is discarded</span></span><br/><span class="line">x,y,z = <span class="number">10</span>,foo2()     <span class="comment">-- x=10,y=&#39;a&#39;,z=&#39;b&#39;</span></span><br/><span class="line">x,y = foo0()     <span class="comment">-- x=nil,y=nil</span></span><br/><span class="line">x,y = foo1()     <span class="comment">-- x=&#39;a&#39;,y=nil</span></span><br/><span class="line">x,y,z = foo2()     <span class="comment">--x=&#39;a&#39;,y=&#39;b&#39;,z=nil</span></span><br/><span class="line">x,y = foo2(),<span class="number">20</span>     <span class="comment">--x=&#39;a&#39;,y=20</span></span><br/><span class="line">x,y = foo0(),<span class="number">20</span>,<span class="number">30</span>     <span class="comment">--x=&#39;nil&#39;,y=20,30</span></span><br/></pre></td></tr></tbody></table></figure><p></p>
<p>第二，函数调用作为函数参数被调用时，和多值赋值是相同的<br/></p><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/><span class="line">7</span><br/><span class="line">8</span><br/><span class="line">9</span><br/></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo0</span> <span class="params">()</span></span> <span class="keyword">end</span>     <span class="comment">-- return no results</span></span><br/><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo1</span> <span class="params">()</span></span> <span class="keyword">return</span> <span class="string">&#39;a&#39;</span> <span class="keyword">end</span>     <span class="comment">-- retuens 1 result</span></span><br/><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo2</span> <span class="params">()</span></span> <span class="keyword">return</span> <span class="string">&#39;a&#39;</span>,<span class="string">&#39;b&#39;</span> <span class="keyword">end</span>     <span class="comment">-- returns 2 results</span></span><br/><span class="line"></span><br/><span class="line"><span class="built_in">print</span>(foo0())     <span class="comment">--</span></span><br/><span class="line"><span class="built_in">print</span>(foo1())     <span class="comment">-- a</span></span><br/><span class="line"><span class="built_in">print</span>(foo2())     <span class="comment">-- a b</span></span><br/><span class="line"><span class="built_in">print</span>(foo2(),<span class="number">1</span>)     <span class="comment">-- a 1</span></span><br/><span class="line"><span class="built_in">print</span>(foo2() .. <span class="string">&#34;x&#34;</span>)     <span class="comment">-- ax</span></span><br/></pre></td></tr></tbody></table></figure><p></p>
<p>第三，函数调用在表构造函数中初始化时，和多值赋值时相同<br/></p><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/><span class="line">7</span><br/><span class="line">8</span><br/></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo0</span> <span class="params">()</span></span> <span class="keyword">end</span>     <span class="comment">-- return no results</span></span><br/><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo1</span> <span class="params">()</span></span> <span class="keyword">return</span> <span class="string">&#39;a&#39;</span> <span class="keyword">end</span>     <span class="comment">-- retuens 1 result</span></span><br/><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo2</span> <span class="params">()</span></span> <span class="keyword">return</span> <span class="string">&#39;a&#39;</span>,<span class="string">&#39;b&#39;</span> <span class="keyword">end</span>     <span class="comment">-- returns 2 results</span></span><br/><span class="line"></span><br/><span class="line">a = {foo0()}     <span class="comment">-- a = {}</span></span><br/><span class="line">a = {foo1()}     <span class="comment">-- a = {&#39;a&#39;}</span></span><br/><span class="line">a = {foo2()}     <span class="comment">-- a = {&#39;a&#39;,&#39;b&#39;}</span></span><br/><span class="line">a = {foo0(),foo2(),<span class="number">4</span>}     <span class="comment">-- a[1] = nil,a[2] = &#39;a&#39;,a[3] = 4</span></span><br/></pre></td></tr></tbody></table></figure><p></p>
<p>另外，return f()这种形式，则返回”f()的返回值”：<br/></p><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/><span class="line">7</span><br/><span class="line">8</span><br/><span class="line">9</span><br/><span class="line">10</span><br/><span class="line">11</span><br/><span class="line">12</span><br/><span class="line">13</span><br/><span class="line">14</span><br/></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">(i)</span></span></span><br/><span class="line">     <span class="keyword">if</span> i == <span class="number">0</span> <span class="keyword">then</span></span><br/><span class="line">          <span class="keyword">return</span> foo0()</span><br/><span class="line">     <span class="keyword">elseif</span> i == <span class="number">1</span> <span class="keyword">then</span></span><br/><span class="line">          reutrn foo1()</span><br/><span class="line">     <span class="keyword">elseif</span> i == <span class="number">2</span> <span class="keyword">then</span></span><br/><span class="line">          <span class="keyword">return</span> foo2()</span><br/><span class="line">     <span class="keyword">end</span></span><br/><span class="line"><span class="keyword">end</span></span><br/><span class="line"></span><br/><span class="line"><span class="built_in">print</span>(foo(<span class="number">1</span>))     <span class="comment">-- a</span></span><br/><span class="line"><span class="built_in">print</span>(foo(<span class="number">2</span>))     <span class="comment">-- a b</span></span><br/><span class="line"><span class="built_in">print</span>(foo(<span class="number">0</span>))     <span class="comment">-- (no results)</span></span><br/><span class="line"><span class="built_in">print</span>(foo(<span class="number">3</span>))     <span class="comment">-- (no results)</span></span><br/></pre></td></tr></tbody></table></figure><p></p>
<p>可以使用圆括号强制使调用返回一个值<br/></p><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/><span class="line">7</span><br/></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo0</span> <span class="params">()</span></span> <span class="keyword">end</span>     <span class="comment">-- return no results</span></span><br/><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo1</span> <span class="params">()</span></span> <span class="keyword">return</span> <span class="string">&#39;a&#39;</span> <span class="keyword">end</span>     <span class="comment">-- retuens 1 result</span></span><br/><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo2</span> <span class="params">()</span></span> <span class="keyword">return</span> <span class="string">&#39;a&#39;</span>,<span class="string">&#39;b&#39;</span> <span class="keyword">end</span>     <span class="comment">-- returns 2 results</span></span><br/><span class="line"></span><br/><span class="line"><span class="built_in">print</span>((foo0()))     <span class="comment">-- nil</span></span><br/><span class="line"><span class="built_in">print</span>((foo1()))     <span class="comment">-- a</span></span><br/><span class="line"><span class="built_in">print</span>((foo2()))     <span class="comment">-- a</span></span><br/></pre></td></tr></tbody></table></figure><p></p>
<p>一个return语句如果使用圆括号将返回值括起来也将导致返回一个值</p>
<h3 id="函数定义"><a href="#函数定义" class="headerlink" title="函数定义"></a>函数定义</h3><h4 id="作为表达式调用函数"><a href="#作为表达式调用函数" class="headerlink" title="作为表达式调用函数"></a>作为表达式调用函数</h4><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/><span class="line">7</span><br/><span class="line">8</span><br/><span class="line">9</span><br/><span class="line">10</span><br/><span class="line">11</span><br/></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> a = f1()</span><br/><span class="line"><span class="keyword">local</span> b,c = f1(),f2()</span><br/><span class="line"><span class="keyword">local</span> e = f3()</span><br/><span class="line"></span><br/><span class="line"><span class="built_in">print</span>(a,b,c,d,e)</span><br/><span class="line"></span><br/><span class="line"></span><br/><span class="line"></span><br/><span class="line"></span><br/><span class="line">=====结果=====</span><br/><span class="line"><span class="literal">nil</span>     <span class="literal">nil</span>     <span class="number">1</span>     <span class="literal">nil</span>     <span class="number">1</span></span><br/></pre></td></tr></tbody></table></figure>
<p>解答：当调用作为表达式最后一个参数或者仅有一个参数时，根据变量个数函数尽可能多地返回多个值，不足补nil，超出舍去，其他情况下，函数调用仅返回第一个值(如果没有返回值为nil)</p>
<h4 id="作为函数参数被调用"><a href="#作为函数参数被调用" class="headerlink" title="作为函数参数被调用"></a>作为函数参数被调用</h4><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/><span class="line">7</span><br/><span class="line">8</span><br/><span class="line">9</span><br/><span class="line">10</span><br/><span class="line">11</span><br/><span class="line">12</span><br/><span class="line">13</span><br/><span class="line">14</span><br/></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(f1())</span><br/><span class="line"><span class="built_in">print</span>(f2())</span><br/><span class="line"><span class="built_in">print</span>(f3())</span><br/><span class="line"><span class="built_in">print</span>(f1(),f3())</span><br/><span class="line"><span class="built_in">print</span>(f1(),f3(),f2())</span><br/><span class="line"></span><br/><span class="line"></span><br/><span class="line"></span><br/><span class="line"></span><br/><span class="line">=====结果=====</span><br/><span class="line"><span class="number">1</span></span><br/><span class="line"><span class="number">1</span>     <span class="number">2</span></span><br/><span class="line"><span class="literal">nil</span>     <span class="number">1</span>     <span class="number">2</span></span><br/><span class="line"><span class="literal">nil</span>     <span class="number">1</span>     <span class="number">1</span></span><br/></pre></td></tr></tbody></table></figure>
<p>解答：</p>
<p>第一行：无输出，在print也会被忽略输出</p>
<p>第二行：输出结果的第一行对应f2()</p>
<p>第三行：f3()有两个结果，所以输出2个结果</p>
<p>第四行：f1()虽然没有输出，但是在逗号前他是被强制输出的，所以有nil值输出</p>
<p>第五行：有逗号间隔，逗号前都被要求输出一个结果，所以f3()只输出第一个返回值</p>
<h4 id="作为表构造函数的初始值"><a href="#作为表构造函数的初始值" class="headerlink" title="作为表构造函数的初始值"></a>作为表构造函数的初始值</h4><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/><span class="line">7</span><br/><span class="line">8</span><br/><span class="line">9</span><br/><span class="line">10</span><br/><span class="line">11</span><br/><span class="line">12</span><br/><span class="line">13</span><br/><span class="line">14</span><br/><span class="line">15</span><br/><span class="line">16</span><br/><span class="line">17</span><br/></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> t1 = {f1()}</span><br/><span class="line"><span class="keyword">local</span> t2 = {f2()}</span><br/><span class="line"><span class="keyword">local</span> t3 = {f3()}</span><br/><span class="line"><span class="keyword">local</span> t4 = {f1(),f2(),f3()}</span><br/><span class="line"><span class="built_in">print</span>(#t1)</span><br/><span class="line"><span class="built_in">print</span>(#t2)</span><br/><span class="line"><span class="built_in">print</span>(#t3)</span><br/><span class="line"><span class="built_in">print</span>(#t4)</span><br/><span class="line"></span><br/><span class="line"></span><br/><span class="line"></span><br/><span class="line"></span><br/><span class="line">=====结果=====</span><br/><span class="line"><span class="number">0</span></span><br/><span class="line"><span class="number">1</span></span><br/><span class="line"><span class="number">2</span></span><br/><span class="line"><span class="number">4</span></span><br/></pre></td></tr></tbody></table></figure>
<h3 id="可变参数-三个点表示"><a href="#可变参数-三个点表示" class="headerlink" title="可变参数(三个点表示)"></a>可变参数(三个点表示)</h3><p>lua将函数的参数放在一个叫arg的表中，除了参数以外，arg表还有一个域n表示参数的个数(lua会将前面的实参传给函数的固定参数，后面的实参放在arg表中)<br/></p><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/><span class="line">7</span><br/><span class="line">8</span><br/><span class="line">9</span><br/><span class="line">10</span><br/><span class="line">11</span><br/><span class="line">12</span><br/><span class="line">13</span><br/><span class="line">14</span><br/><span class="line">15</span><br/><span class="line">16</span><br/><span class="line">17</span><br/></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">average</span><span class="params">(...)</span></span></span><br/><span class="line">     a = <span class="number">0</span></span><br/><span class="line">     <span class="keyword">local</span> <span class="built_in">arg</span> = {...}</span><br/><span class="line">     <span class="keyword">for</span> i,v <span class="keyword">in</span> <span class="built_in">ipairs</span>(<span class="built_in">arg</span>) <span class="keyword">do</span></span><br/><span class="line">          a = a + v</span><br/><span class="line">     <span class="keyword">end</span></span><br/><span class="line">     <span class="built_in">print</span>(<span class="string">&#34;总共传入&#34;</span>..#<span class="built_in">arg</span>..<span class="string">&#34;个数&#34;</span>)</span><br/><span class="line">     <span class="keyword">return</span> a/#<span class="built_in">arg</span></span><br/><span class="line"><span class="keyword">end</span></span><br/><span class="line"><span class="built_in">print</span>(<span class="string">&#34;平均值为：&#34;</span>average(<span class="number">10</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>))</span><br/><span class="line"></span><br/><span class="line"></span><br/><span class="line"></span><br/><span class="line"></span><br/><span class="line">=====结果=====</span><br/><span class="line">总共传入<span class="number">6</span>个数</span><br/><span class="line">平均值为：     <span class="number">5.5</span></span><br/></pre></td></tr></tbody></table></figure><p></p>
<h3 id="强制转换"><a href="#强制转换" class="headerlink" title="强制转换"></a>强制转换</h3><p>在函数外加上括号()就能实现强制返回一个值<br/></p><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/><span class="line">7</span><br/><span class="line">8</span><br/><span class="line">9</span><br/><span class="line">10</span><br/><span class="line">11</span><br/><span class="line">12</span><br/></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span><span class="params">()</span></span></span><br/><span class="line">     <span class="keyword">return</span> <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span></span><br/><span class="line"><span class="keyword">end</span></span><br/><span class="line"><span class="built_in">print</span>(f())</span><br/><span class="line"><span class="built_in">print</span>((f()))</span><br/><span class="line"></span><br/><span class="line"></span><br/><span class="line"></span><br/><span class="line"></span><br/><span class="line">=====结果=====</span><br/><span class="line"><span class="number">1</span>     <span class="number">2</span>     <span class="number">3</span></span><br/><span class="line"><span class="number">1</span></span><br/></pre></td></tr></tbody></table></figure><p></p>