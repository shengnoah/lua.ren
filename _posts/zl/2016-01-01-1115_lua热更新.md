---
layout: post
title: lua热更新 
tags: [lua文章]
categories: [topic]
---
<p>热更新，不停机更新，是在不重新下载安装包，甚至不重启游戏的情况下对游戏进行更新。</p>

<figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="params">(module_name)</span></span></div><div class="line">    <span class="keyword">local</span> old_module = <span class="built_in">_G</span>[module_name]</div><div class="line"></div><div class="line">    package.loaded[module_name] = <span class="literal">nil</span></div><div class="line">    <span class="built_in">require</span> (module_name)</div><div class="line"></div><div class="line">    <span class="keyword">local</span> new_module = <span class="built_in">_G</span>[module_name]</div><div class="line">    <span class="keyword">for</span> k, v <span class="keyword">in</span> <span class="built_in">pairs</span>(new_module) <span class="keyword">do</span></div><div class="line">        old_module[k] = v</div><div class="line">    <span class="keyword">end</span></div><div class="line"></div><div class="line">    package.loaded[module_name] = old_module</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></tbody></table></figure>
<p>可以对旧模块完成更新。　　</p>
<p>　</p>