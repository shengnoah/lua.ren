---
layout: post
title: Lua 
tags: [lua文章]
categories: [topic]
---
我们要明确一个前提：Lua是动态型语言，变量是不需要类型定义，只需要为变量赋值。值可以存储在变量中，最为参数传递或结果返回。  
一 基本类型  
Lua有8个基本类型：nil、boolean、number、string、userdata、function、thread、table

1 nil  
表示一个无效的值，在条件表达式中相当于false  
2 boolean  
false和ture  
3 number  
表示双精度类型的实浮点数  
4 string  
字符串由一对双引号或单引号来表示  
5 function  
用C或者Lua写的函数  
6 userdata  
用来表示任意存储在变量中的C数据结构  
7 thread  
表示执行的独立线路，用于执行协同进程  
8 table  
Lua中的表（table）其实就是一个‘关联数组’（associative
arrays），数组的索引可以是数字或者是字符串。在Lua中，table的创建是通过“构造表达式”来完成，例如最简单的表达式{}，用来创建一个空表。  
二 简单例子  
1 我们可以使用type函数来测试指定变量或者值的类型

    
    
    eg：
    WangBingdeMacBook-Pro:Hexo wangbing$ lua -i
    Lua 5.3.3  Copyright (C) 1994-2016 Lua.org, PUC-Rio
    > print(type("Lua test"))
    string
    > print(type(100*1.2))
    number
    > print(type(type))
    function
    > print(type(false))
    boolean
    >
    

2 nil  
对于全局变量和table，nil还意味着“删除”操作。给全局变量或者table表里的变量一个nil值,相当于把他们删掉。  
nil在进行比较的时候，需要加上双引号”:

    
    
    eg：
    >> type(X)==nil
    stdin:9: unexpected symbol near '=='
    > type(X)=="nil"
    true
    

3 boolean（布尔）  
Lua中把false和nil看做“假”，其他都为真

4 number(数字)  
Lua默认只有一种number类型，–double（双精度）类型  
5 string （字符串）  
用一堆双引号或者单引号表示，也可以用2个方括号“[[]]”来表示“一块”字符串

    
    
    eg：
    > string1 = "SkyLigt 001"
    > string2 = 'SkyLigt 002'
    > string3 = [[<html><head></head><body><a href="www.baidu.com/">Lua学习</a></body></html>]]
    > print(string1)
    SkyLigt 001
    > print(string2)
    SkyLigt 002
    > print(string3)
    <html><head></head><body><a href="www.baidu.com/">Lua学习</a></body></html>
    >
    

在对一个数字字符串进行算术操作时，Lua会尝试将这个数字字符串转成一个数字

    
    
    eg:
    > print("2" + 10)
    12.0
    >
    

字符串的连接使用 ..表示

    
    
    eg：
    > print("zhangsan".."is studying".."Lua")
    zhangsanis studyingLua
    >
    

字符串的长度使用#表示

    
    
    eg：
    > stringLength = "www.apple.com.hk"
    > print(#stringLength)
    16
    >
    

6 table (表)  
在Lua中，table的创建是通过”构造表达式”。最简单构造表达式是{}，用来创建一个空表。也可以在表里添加一些数据，直接初始化表

    
    
    eg:
    -- 创建一个空的 table
    local tbl1 = {}
    
    -- 直接初始表
    local tbl2 = {"iOS Team", "xxxxxx", "Android Team", "xxxx"}
    

Lua 中的表（table）其实是一个”关联数组”（associative arrays），数组的索引可以是数字或者是字符串.  
不同于其他语言的数组把 0 作为数组的初始索引，在 Lua 里表的默认初始索引一般以 1 开始。  
table 不会固定长度大小，有新数据添加时 table 长度会自动增长，没初始的 table 都是 nil

7 function（函数）

Lua 中，函数是被看作是”第一类值（First-Class Value）”，函数可以存在变量里:  
function 可以以匿名函数（anonymous function）的方式通过参数传递

8 thread（线程）

在 Lua
里，最主要的线程是协同进程（coroutine）。它跟线程（thread）差不多，拥有自己独立的栈、局部变量和命令指针，可以跟其他协同进程共享全局变量和其他大部分东西。  
线程跟协程的区别：线程可以同时多个运行，而协程任意时刻只能运行一个，并且处于运行状态的协程只有被挂起（suspend）时才会暂停。

9 userdata（自定义类型）

userdata 是一种用户自定义数据，用于表示一种由应用进程或 C/C++ 语言库所创建的类型，可以将任意 C/C++ 的任意数据类型的数据（通常是
struct 和 指针）存储到 Lua 变量中调用