---
layout: post
title: evaluate reverse polish notation 
tags: [lua文章]
categories: [topic]
---
<p>Evaluate the value of an arithmetic expression in Reverse Polish Notation.</p>
<p>Valid operators are +, -, *, /. Each operand may be an integer or another expression.</p>
<p>Some examples:<br/>  [“2”, “1”, “+”, “3”, “<em>“] -&gt; ((2 + 1) </em> 3) -&gt; 9<br/>  [“4”, “13”, “5”, “/“, “+”] -&gt; (4 + (13 / 5)) -&gt; 6</p>
<figure class="highlight"><pre><div class="line"><span class="keyword">int</span> evalRPN(<span class="stl_container"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;</span> &amp;tokens) {</div><div class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</div><div class="line">    <span class="stl_container"><span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt;</span>st;</div><div class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;tokens.size(); i++){</div><div class="line">        <span class="keyword">if</span>(tokens[i] != <span class="string">&#34;+&#34;</span> &amp;&amp; tokens[i] != <span class="string">&#34;-&#34;</span></div><div class="line">           &amp;&amp; tokens[i] != <span class="string">&#34;*&#34;</span> &amp;&amp; tokens[i] != <span class="string">&#34;/&#34;</span>){</div><div class="line">            st.push(atoi(tokens[i].c_str()));    </div><div class="line">        }</div><div class="line">        <span class="keyword">else</span>{</div><div class="line">            <span class="keyword">int</span> b = st.top();st.pop();</div><div class="line">            <span class="keyword">int</span> a = st.top();st.pop();</div><div class="line">            </div><div class="line">            <span class="keyword">int</span> c = calResult(a,b,tokens[i]);</div><div class="line">            st.push(c);</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> st.top();</div><div class="line">}</div><div class="line"><span class="keyword">private</span>:</div><div class="line"><span class="keyword">int</span> calResult(<span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="built_in">string</span>&amp; symbol){</div><div class="line">    <span class="keyword">if</span>(symbol == <span class="string">&#34;+&#34;</span>) <span class="keyword">return</span> a+b;</div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(symbol == <span class="string">&#34;-&#34;</span>) <span class="keyword">return</span> a-b;</div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(symbol == <span class="string">&#34;*&#34;</span>) <span class="keyword">return</span> a*b;</div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(symbol == <span class="string">&#34;/&#34;</span>) <span class="keyword">return</span> a/b;</div><div class="line">}</div></pre></figure>