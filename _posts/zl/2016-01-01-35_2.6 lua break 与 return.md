---
layout: post
title: 2.6 lua break 与 return 
tags: [lua文章]
categories: [topic]
---
<p>和其他语言一样<code>lua</code>也提供对应的跳出关键字，不过<code>lua</code>不提供<code>continue</code>关键字。</p>
<h2 id="break"><a href="#break" class="headerlink" title="break"></a>break</h2><p>语句<code>break</code>用于跳出循环，终止<code>for</code>、<code>repeat</code>、<code>while</code> 三种循环的执行，并跳出当前循环体，继续执行当前循环之后的语句,在循环外部不可用。</p>
<h2 id="return"><a href="#return" class="headerlink" title="return"></a>return</h2><p>return 只能写在语句块的最后，一旦执行了return 语句，该语句之后的所有语句都不会再执行。若要写在函数中间，则只能写在一个显式的语句块内。<br/></p><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/><span class="line">7</span><br/><span class="line">8</span><br/><span class="line">9</span><br/><span class="line">10</span><br/><span class="line">11</span><br/><span class="line">12</span><br/><span class="line">13</span><br/><span class="line">14</span><br/><span class="line">15</span><br/><span class="line">16</span><br/><span class="line">17</span><br/><span class="line">18</span><br/><span class="line">19</span><br/><span class="line">20</span><br/></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="params">(x, y)</span></span></span><br/><span class="line">    <span class="keyword">return</span> x + y</span><br/><span class="line">    </span><br/><span class="line">    <span class="comment">--因为前面有个return，若不注释该语句，则会报错</span></span><br/><span class="line"><span class="keyword">end</span></span><br/><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">is_positive</span><span class="params">(x)</span></span></span><br/><span class="line">    <span class="keyword">if</span> x &gt; <span class="number">0</span> <span class="keyword">then</span></span><br/><span class="line">        <span class="keyword">return</span> x .. <span class="string">&#34; is positive&#34;</span></span><br/><span class="line">    <span class="keyword">else</span></span><br/><span class="line">        <span class="keyword">return</span> x .. <span class="string">&#34; is non-positive&#34;</span></span><br/><span class="line">    <span class="keyword">end</span></span><br/><span class="line">    <span class="comment">--由于return只出现在前面显式的语句块，所以此语句不注释也不会报错</span></span><br/><span class="line">    <span class="comment">--，但是不会被执行，此处不会产生输出</span></span><br/><span class="line">    <span class="built_in">print</span>(<span class="string">&#34;function end!&#34;</span>)</span><br/><span class="line"><span class="keyword">end</span></span><br/><span class="line"></span><br/><span class="line">sum = add(<span class="number">10</span>, <span class="number">20</span>)</span><br/><span class="line"><span class="built_in">print</span>(<span class="string">&#34;The sum is &#34;</span> .. sum) <span class="comment">--&gt;output:The sum is 30</span></span><br/><span class="line">answer = is_positive(<span class="number">-10</span>)</span><br/><span class="line"><span class="built_in">print</span>(answer) <span class="comment">--&gt;output:-10 is non-positive</span></span><br/></pre></td></tr></tbody></table></figure><p></p>
<p>有时候，为了调试方便，我们可以想在某个函数的中间提前 <code>return</code> ，以进行控制流的短路。此时我们可以将 <code>return</code> 放在一个 <code>do ... end</code> 代码块中:<br/></p><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">()</span></span></span><br/><span class="line">    <span class="built_in">print</span>(<span class="string">&#34;before&#34;</span>)</span><br/><span class="line">    <span class="keyword">do</span> <span class="keyword">return</span> <span class="keyword">end</span></span><br/><span class="line">    <span class="built_in">print</span>(<span class="string">&#34;after&#34;</span>) <span class="comment">-- 这一行语句永远不会执行到</span></span><br/><span class="line"><span class="keyword">end</span></span><br/></pre></td></tr></tbody></table></figure><p></p>
<p><strong>特别注意</strong>：上述实例中<code>return</code>如果不放在<code>do ... end</code>中将会保存，因为<code>return</code>只能放在函数的最后。</p>