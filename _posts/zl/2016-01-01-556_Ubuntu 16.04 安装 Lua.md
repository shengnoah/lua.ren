---
layout: post
title: Ubuntu 16.04 安装 Lua 
tags: [lua文章]
categories: [topic]
---
<p>在 Linux 系统上使用以下命令编译安装 Lua：</p>
<pre><code>curl -R -O http://www.lua.org/ftp/lua-5.3.3.tar.gz
tar zxf lua-5.3.3.tar.gz
cd lua-5.3.3
make linux test
</code></pre>
<h4 id="安装-make"><a href="#安装-make" class="headerlink" title="安装 make"></a>安装 make</h4><p>编译过程如果提示以下信息则需要先安装 make：</p>
<pre><code># make linux test
The program &#39;make&#39; can be found in the following packages:
 * make
 * make-guile
Try: apt install &lt;selected package&gt;
</code></pre><p>安装 make</p>
<pre><code># apt-get install make
</code></pre><h4 id="安装-gcc"><a href="#安装-gcc" class="headerlink" title="安装 gcc"></a>安装 gcc</h4><p>编译过程提示以下信息则需要安装 gcc：</p>
<pre><code># make linux test
cd src &amp;&amp; make linux
make[1]: Entering directory &#39;/root/lua/lua-5.3.3/src&#39;
make all SYSCFLAGS=&#34;-DLUA_USE_LINUX&#34; SYSLIBS=&#34;-Wl,-E -ldl -lreadline&#34;
make[2]: Entering directory &#39;/root/lua/lua-5.3.3/src&#39;
gcc -std=gnu99 -O2 -Wall -Wextra -DLUA_COMPAT_5_2 -DLUA_USE_LINUX    -c -o lapi.o lapi.c
make[2]: gcc: Command not found
&lt;builtin&gt;: recipe for target &#39;lapi.o&#39; failed
make[2]: *** [lapi.o] Error 127
make[2]: Leaving directory &#39;/root/lua/lua-5.3.3/src&#39;
Makefile:110: recipe for target &#39;linux&#39; failed
make[1]: *** [linux] Error 2
make[1]: Leaving directory &#39;/root/lua/lua-5.3.3/src&#39;
Makefile:55: recipe for target &#39;linux&#39; failed
make: *** [linux] Error 2
</code></pre><p>安装 gcc：</p>
<pre><code># apt-get install gcc
</code></pre><p>安装 gcc 过程提示以下信息：</p>
<pre><code>E: Failed to fetch http://cn.archive.ubuntu.com/ubuntu/pool/main/b/binutils/binutils_2.26.1-1ubuntu1~16.04_amd64.deb  404  Not Found [IP: 115.28.122.210 80]
E: Unable to fetch some archives, maybe run apt-get update or try with --fix-missing?
</code></pre><p>先更新安装源：</p>
<pre><code># apt-get update
</code></pre><p>再次安装 gcc 成功。</p>
<h4 id="安装-libreadline-dev"><a href="#安装-libreadline-dev" class="headerlink" title="安装 libreadline-dev"></a>安装 libreadline-dev</h4><p>编译过程提示以下信息则需要安装 libreadline-dev：</p>
<pre><code>lua.c:80:31: fatal error: readline/readline.h: No such file or directory
compilation terminated.
</code></pre><p>安装 libreadline-dev：</p>
<pre><code># apt-get install libreadline-dev
</code></pre><p>再次编译成功。</p>
<h4 id="检查安装"><a href="#检查安装" class="headerlink" title="检查安装"></a>检查安装</h4><p>用以下方法检查安装，如果安装成功会有版本信息提示：</p>
<pre><code># src/lua -v
Lua 5.3.3  Copyright (C) 1994-2016 Lua.org, PUC-Rio
</code></pre><h4 id="编译安装"><a href="#编译安装" class="headerlink" title="编译安装"></a>编译安装</h4><pre><code># make linux install
</code></pre>