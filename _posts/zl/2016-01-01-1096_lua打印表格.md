---
layout: post
title: lua打印表格 
tags: [lua文章]
categories: [topic]
---
<h3 id="Lua打印表格"><a href="#Lua打印表格" class="headerlink" title="Lua打印表格"></a>Lua打印表格</h3><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><div class="line">function print_table(t)</div><div class="line">    local cache = {}</div><div class="line">    local function print_table_sub (t, indent)</div><div class="line">        if (cache[tostring(t)]) then</div><div class="line">            print(indent  ..  &#34;*&#34;  ..  tostring(t))</div><div class="line">        else</div><div class="line">            cache[tostring(t)] = true</div><div class="line">            if (type(t) == &#34;table&#34;) then</div><div class="line">                for pos, val in pairs(t) do</div><div class="line">                    if (type(val) == &#34;table&#34;) then</div><div class="line">                        print(indent  ..  &#34;[&#34;  ..  pos  ..  &#34;] =&gt; &#34;  ..  tostring(t)  ..  &#34; {&#34;)</div><div class="line">                        print_table_sub (val, indent  ..  string.rep(&#34; &#34;, string.len(pos) + 8))</div><div class="line">                        print(indent  ..  string.rep(&#34; &#34;, string.len(pos) + 6)  ..  &#34;}&#34;)</div><div class="line">                    elseif (type(val) == &#34;string&#34;) then</div><div class="line">                        print(indent  ..  &#34;[&#34;  ..  pos  ..  &#39;] =&gt; &#34;&#39;  ..  val  ..  &#39;&#34;&#39;)</div><div class="line">                    else</div><div class="line">                        print(indent  ..  &#34;[&#34;  ..  pos  ..  &#34;] =&gt; &#34;  ..  tostring(val))</div><div class="line">                    end</div><div class="line">                end</div><div class="line">            else</div><div class="line">                print(indent  ..  tostring(t))</div><div class="line">            end</div><div class="line">        end</div><div class="line">    end</div><div class="line">    if (type(t) == &#34;table&#34;) then</div><div class="line">        print(tostring(t)  ..  &#34; {&#34;)</div><div class="line">        print_table_sub (t, &#34;  &#34;)</div><div class="line">        print(&#34;}&#34;)</div><div class="line">    else</div><div class="line">        print_table_sub (t, &#34;  &#34;)</div><div class="line">    end</div><div class="line">    print()</div><div class="line">end</div></pre></td></tr></tbody></table></figure>