---
layout: post
title: lua中执行shell 
tags: [lua文章]
categories: [topic]
---
<div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    
    </div>
    

    <h3 id="直接执行Shell"><a href="#直接执行Shell" class="headerlink" title="直接执行Shell"></a>直接执行Shell</h3><p>直接执行xxx指令</p>
<figure class="highlight plain"><table><tbody><tr><td class="code"><pre><div class="line">os.execute(&#39;xxx&#39;)</div></pre></td></tr></tbody></table></figure>
<h3 id="以指定用户执行Shell"><a href="#以指定用户执行Shell" class="headerlink" title="以指定用户执行Shell"></a>以指定用户执行Shell</h3><p>pi用户执行ls</p>
<figure class="highlight plain"><table><tbody><tr><td class="code"><pre><div class="line">os.execute(&#39;su -s /bin/bash -c &#34;ls&#34; pi&#39;)</div></pre></td></tr></tbody></table></figure>
<p>屏幕亮</p>
<figure class="highlight plain"><table><tbody><tr><td class="code"><pre><div class="line">os.execute(&#39;su -s /bin/bash -c &#34;xset dpms force on&#34; pi&#39;)</div></pre></td></tr></tbody></table></figure>
<p>屏幕灭</p>
<figure class="highlight plain"><table><tbody><tr><td class="code"><pre><div class="line">os.execute(&#39;su -s /bin/bash -c &#34;xset dpms force off&#34; pi&#39;)</div></pre></td></tr></tbody></table></figure>
<h3 id="获取执行结果"><a href="#获取执行结果" class="headerlink" title="获取执行结果"></a>获取执行结果</h3><p>获取ls执行结果</p>
<figure class="highlight plain"><table><tbody><tr><td class="code"><pre><div class="line">local t = io.popen(&#39;ls&#39;)</div><div class="line">local s = t:read(&#34;*all&#34;)</div><div class="line">t:close()</div></pre></td></tr></tbody></table></figure>