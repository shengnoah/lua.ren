---
layout: post
title: Lua table 学习笔记 
tags: [lua文章]
categories: [topic]
---
<h2 id="lua-table定义">Lua table定义</h2>
<p>table类型实现了“关联数组”。“关联数组” 是一种具有特殊索引方式的数组，索引可为字符串string或(整)数number类型.</p>

<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="n">local</span> <span class="n">corp</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">web</span> <span class="o">=</span> <span class="s">&#34;www.google.com&#34;</span><span class="p">,</span>   <span class="o">--</span><span class="err">索引为字符串，</span><span class="n">key</span> <span class="o">=</span> <span class="s">&#34;web&#34;</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="s">&#34;www.google.com&#34;</span>
    <span class="n">telephone</span> <span class="o">=</span> <span class="s">&#34;12345678&#34;</span><span class="p">,</span>   <span class="o">--</span><span class="err">索引为字符串</span>
    <span class="n">staff</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#34;Jack&#34;</span><span class="p">,</span> <span class="s">&#34;Scott&#34;</span><span class="p">,</span> <span class="s">&#34;Gary&#34;</span><span class="p">},</span> <span class="o">--</span><span class="err">索引为字符串，值也是一个表</span>
    <span class="mi">100876</span><span class="p">,</span>              <span class="o">--</span><span class="err">相当于</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100876</span><span class="err">，此时索引为数字</span><span class="p">,</span><span class="n">key</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">100876</span>
    <span class="mi">100191</span><span class="p">,</span>              <span class="o">--</span><span class="err">相当于</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100191</span><span class="err">，此时索引为数字</span>
    <span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">=</span> <span class="mi">360</span><span class="p">,</span>          <span class="o">--</span><span class="err">直接把数字索引给出</span>
    <span class="p">[</span><span class="s">&#34;city&#34;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#34;Beijing&#34;</span> <span class="o">--</span><span class="err">索引为字符串</span>
<span class="p">}</span>

<span class="n">print</span><span class="p">(</span><span class="n">corp</span><span class="p">.</span><span class="n">web</span><span class="p">)</span>               <span class="o">--&gt;</span><span class="n">output</span><span class="o">:</span><span class="n">www</span><span class="p">.</span><span class="n">google</span><span class="p">.</span><span class="n">com</span>
<span class="n">print</span><span class="p">(</span><span class="n">corp</span><span class="p">[</span><span class="s">&#34;telephone&#34;</span><span class="p">])</span>      <span class="o">--&gt;</span><span class="n">output</span><span class="o">:</span><span class="mi">12345678</span>
<span class="n">print</span><span class="p">(</span><span class="n">corp</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>                <span class="o">--&gt;</span><span class="n">output</span><span class="o">:</span><span class="mi">100191</span>
<span class="n">print</span><span class="p">(</span><span class="n">corp</span><span class="p">[</span><span class="s">&#34;city&#34;</span><span class="p">])</span>           <span class="o">--&gt;</span><span class="n">output</span><span class="o">:</span><span class="s">&#34;Beijing&#34;</span>
<span class="n">print</span><span class="p">(</span><span class="n">corp</span><span class="p">.</span><span class="n">staff</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>          <span class="o">--&gt;</span><span class="n">output</span><span class="o">:</span><span class="n">Jack</span>
<span class="n">print</span><span class="p">(</span><span class="n">corp</span><span class="p">[</span><span class="mi">10</span><span class="p">])</span>               <span class="o">--&gt;</span><span class="n">output</span><span class="o">:</span><span class="mi">360</span>
</code></pre>
</div>
<p>在定义表的时候，我们可以把所有的数据内容一起写在”{“和”}”之间，这样子是非常方便，而且很好看。比如：</p>

<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="n">T1</span><span class="o">=</span> <span class="p">{</span> 
    <span class="mi">10</span><span class="p">,</span> <span class="o">--</span> <span class="err">相当于</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span> 
    <span class="p">[</span><span class="mi">100</span><span class="p">]</span> <span class="o">=</span> <span class="mi">40</span><span class="p">,</span> 
    <span class="n">John</span><span class="o">=</span> <span class="o">--</span> <span class="err">如果你原意，你还可以写成：</span><span class="p">[</span><span class="s">&#34;John&#34;</span><span class="p">]</span> <span class="o">=</span> 
    <span class="p">{</span> 
        <span class="n">Age</span><span class="o">=</span><span class="mi">27</span><span class="p">,</span> <span class="o">--</span> <span class="err">如果你原意，你还可以写成：</span><span class="p">[</span><span class="s">&#34;Age&#34;</span><span class="p">]</span> <span class="o">=</span><span class="mi">27</span> 
        <span class="n">Gender</span><span class="o">=</span><span class="n">Male</span> <span class="o">--</span> <span class="err">如果你原意，你还可以写成：</span><span class="p">[</span><span class="s">&#34;Gender&#34;</span><span class="p">]</span> <span class="o">=</span><span class="n">Male</span> 
    <span class="p">},</span> 
    <span class="mi">20</span> <span class="o">--</span> <span class="err">相当于</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">20</span> 
<span class="p">}</span>
</code></pre>
</div>

<p>在构造TTable时，可以用<code class="highlighter-rouge">;</code>代替<code class="highlighter-rouge">,</code>分割数据项。</p>

<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="n">x</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">45</span><span class="p">;</span> <span class="s">&#34;one&#34;</span><span class="p">,</span> <span class="s">&#34;two&#34;</span><span class="p">,</span> <span class="s">&#34;three&#34;</span><span class="p">}</span>
</code></pre>
</div>

<h2 id="lua-table的遍历">Lua table的遍历</h2>
<p>不同于其他语言的数组把 0 作为数组的初始索引，在 Lua 里表的默认初始索引一般以 1 开始. 对table的遍历，用关键字<code class="highlighter-rouge">pairs</code>.</p>

<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="n">tbl</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#34;apple&#34;</span><span class="p">,</span> <span class="s">&#34;pear&#34;</span><span class="p">,</span> <span class="s">&#34;orange&#34;</span><span class="p">,</span> <span class="s">&#34;grape&#34;</span><span class="p">}</span>
<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="n">in</span> <span class="n">pairs</span><span class="p">(</span><span class="n">tbl</span><span class="p">)</span> <span class="k">do</span>
    <span class="n">print</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
<span class="n">end</span>

<span class="o">--&gt;</span><span class="n">output</span><span class="o">:</span>
<span class="mi">1</span>	<span class="n">apple</span>
<span class="mi">2</span>	<span class="n">pear</span>
<span class="mi">3</span>	<span class="n">orange</span>
<span class="mi">4</span>	<span class="n">grape</span>
</code></pre>
</div>

<h2 id="lua-table删除元素">Lua table删除元素</h2>
<p>给table 表里的变量赋一个<code class="highlighter-rouge">nil</code>值，等同于把它们删掉.示例如下：</p>

<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="n">tab1</span> <span class="o">=</span> <span class="p">{</span> <span class="n">key1</span> <span class="o">=</span> <span class="s">&#34;val1&#34;</span><span class="p">,</span> <span class="n">key2</span> <span class="o">=</span> <span class="s">&#34;val2&#34;</span><span class="p">,</span> <span class="s">&#34;val3&#34;</span> <span class="p">}</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="n">in</span> <span class="n">pairs</span><span class="p">(</span><span class="n">tab1</span><span class="p">)</span> <span class="k">do</span>
    <span class="n">print</span><span class="p">(</span><span class="n">k</span> <span class="p">..</span> <span class="s">&#34; - &#34;</span> <span class="p">..</span> <span class="n">v</span><span class="p">)</span>
<span class="n">end</span>

<span class="o">--&gt;</span> <span class="n">output</span><span class="o">:</span>
<span class="mi">1</span> <span class="o">-</span> <span class="n">val3</span>
<span class="n">key2</span> <span class="o">-</span> <span class="n">val2</span>
<span class="n">key1</span> <span class="o">-</span> <span class="n">val1</span>
 
<span class="n">tab1</span><span class="p">.</span><span class="n">key1</span> <span class="o">=</span> <span class="n">nil</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="n">in</span> <span class="n">pairs</span><span class="p">(</span><span class="n">tab1</span><span class="p">)</span> <span class="k">do</span>
    <span class="n">print</span><span class="p">(</span><span class="n">k</span> <span class="p">..</span> <span class="s">&#34; - &#34;</span> <span class="p">..</span> <span class="n">v</span><span class="p">)</span>
<span class="n">end</span>

<span class="o">--&gt;</span> <span class="n">output</span><span class="o">:</span>
<span class="mi">1</span> <span class="o">-</span> <span class="n">val3</span>
<span class="n">key2</span> <span class="o">-</span> <span class="n">val2</span>

<span class="n">tab1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">nil</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="n">in</span> <span class="n">pairs</span><span class="p">(</span><span class="n">tab1</span><span class="p">)</span> <span class="k">do</span>
    <span class="n">print</span><span class="p">(</span><span class="n">k</span> <span class="p">..</span> <span class="s">&#34; - &#34;</span> <span class="p">..</span> <span class="n">v</span><span class="p">)</span>
<span class="n">end</span>

<span class="o">--&gt;</span> <span class="n">output</span><span class="o">:</span>
<span class="n">key2</span> <span class="o">-</span> <span class="n">val2</span>
</code></pre>
</div>

<h2 id="lua-table库介绍">Lua table库介绍</h2>

<h3 id="tableconcat-table--sep--i--j---">table.concat (table [, sep [, i [, j ] ] ])</h3>
<p>对于元素是string或者number类型的表table，返回table[i]..sep..table[i+1] ··· sep..table[j]连接成的字符串。填充字符串sep默认为空白字符串。起始索引位置i默认为1，结束索引位置j默认是table的长度。如果i大于j，返回一个空字符串。</p>

<blockquote>
  <p>示例代码</p>
</blockquote>

<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s">&#34;hello&#34;</span> <span class="p">}</span>
<span class="n">print</span><span class="p">(</span><span class="n">table</span><span class="p">.</span><span class="n">concat</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
<span class="n">print</span><span class="p">(</span><span class="n">table</span><span class="p">.</span><span class="n">concat</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s">&#34;|&#34;</span><span class="p">))</span>
<span class="n">print</span><span class="p">(</span><span class="n">table</span><span class="p">.</span><span class="n">concat</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s">&#34; &#34;</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">print</span><span class="p">(</span><span class="n">table</span><span class="p">.</span><span class="n">concat</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s">&#34; &#34;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>

<span class="o">--&gt;</span><span class="n">output</span>
<span class="mi">135</span><span class="n">hello</span>
<span class="mi">1</span><span class="o">|</span><span class="mi">3</span><span class="o">|</span><span class="mi">5</span><span class="o">|</span><span class="n">hello</span>

<span class="mi">3</span> <span class="mi">5</span> <span class="n">hello</span>
</code></pre>
</div>

<h3 id="tableinsert-table-pos--value">table.insert (table, [pos ,] value)</h3>
<p>在表table的pos索引位置插入value，其它元素向后移动到空的地方。pos的默认值是表的长度加一，即默认是插在表的最后。</p>

<blockquote>
  <p>示例代码</p>
</blockquote>

<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">}</span>             <span class="o">--</span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span><span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">8</span>
<span class="n">table</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>   <span class="o">--</span><span class="err">在表索引为</span><span class="mi">1</span><span class="err">处插入</span><span class="mi">3</span>
<span class="n">print</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
<span class="n">table</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>    <span class="o">--</span><span class="err">在表的最后插入</span><span class="mi">10</span>
<span class="n">print</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>

<span class="o">--&gt;</span><span class="n">output</span>
<span class="mi">3</span>    <span class="mi">1</span>    <span class="mi">8</span>
<span class="mi">3</span>    <span class="mi">1</span>    <span class="mi">8</span>    <span class="mi">10</span>
</code></pre>
</div>

<h3 id="tablemaxn-table">table.maxn (table)</h3>
<p>返回表table的最大索引编号；如果此表没有正的索引编号，返回0。</p>

<blockquote>
  <p>示例代码</p>
</blockquote>

<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">a</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">print</span><span class="p">(</span><span class="n">table</span><span class="p">.</span><span class="n">maxn</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
<span class="n">a</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span>  
<span class="n">print</span><span class="p">(</span><span class="n">table</span><span class="p">.</span><span class="n">maxn</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>

<span class="o">--&gt;</span><span class="n">output</span>
<span class="mi">0</span>
<span class="mi">5</span>
</code></pre>
</div>

<h3 id="tableremove-table--pos">table.remove (table [, pos])</h3>
<p>在表table中删除索引为pos（pos只能是number型）的元素，并返回这个被删除的元素，它后面所有元素的索引值都会减一。pos的默认值是表的长度，即默认是删除表的最后一个元素。</p>

<blockquote>
  <p>示例代码</p>
</blockquote>

<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">}</span>
<span class="n">print</span><span class="p">(</span><span class="n">table</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="o">--</span><span class="err">删除速索引为</span><span class="mi">1</span><span class="err">的元素</span>
<span class="n">print</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>

<span class="n">print</span><span class="p">(</span><span class="n">table</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>   <span class="o">--</span><span class="err">删除最后一个元素</span>
<span class="n">print</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>

<span class="o">--&gt;</span><span class="n">output</span>
<span class="mi">1</span>
<span class="mi">2</span>    <span class="mi">3</span>    <span class="mi">4</span>    <span class="n">nil</span>
<span class="mi">4</span>
<span class="mi">2</span>    <span class="mi">3</span>    <span class="n">nil</span>    <span class="n">nil</span>
</code></pre>
</div>

<h3 id="tablesort-table--comp">table.sort (table [, comp])</h3>
<p>按照给定的比较函数comp给表table排序，也就是从table[1]到table[n]，这里n表示table的长度。 比较函数有两个参数，如果希望第一个参数排在第二个的前面，就应该返回true，否则返回false。 如果比较函数comp没有给出，默认从小到大排序。</p>

<blockquote>
  <p>示例代码</p>
</blockquote>

<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="n">function</span> <span class="n">compare</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="o">--</span><span class="err">从大到小排序</span>
   <span class="k">return</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span>    <span class="o">--</span><span class="err">如果第一个参数大于第二个就返回</span><span class="nb">true</span><span class="err">，否则返回</span><span class="nb">false</span>
<span class="n">end</span>

<span class="n">a</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">25</span><span class="p">}</span>
<span class="n">table</span><span class="p">.</span><span class="n">sort</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>         <span class="o">--</span><span class="err">默认从小到大排序</span>
<span class="n">print</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
<span class="n">table</span><span class="p">.</span><span class="n">sort</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">compare</span><span class="p">)</span> <span class="o">--</span><span class="err">使用比较函数进行排序</span>
<span class="n">print</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>

<span class="o">--&gt;</span><span class="n">output</span>
<span class="mi">1</span>    <span class="mi">3</span>    <span class="mi">4</span>    <span class="mi">7</span>    <span class="mi">25</span>
<span class="mi">25</span>    <span class="mi">7</span>    <span class="mi">4</span>    <span class="mi">3</span>    <span class="mi">1</span>
</code></pre>
</div>

<h3 id="table一些有用的函数">table一些有用的函数</h3>

<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="n">local</span> <span class="n">function</span> <span class="n">table_is_empty</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">next</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">==</span> <span class="n">nil</span>
<span class="n">end</span>

<span class="n">local</span> <span class="n">function</span> <span class="n">table_is_array</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">type</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">~=</span> <span class="s">&#34;table&#34;</span> <span class="n">then</span> <span class="k">return</span> <span class="nb">false</span> <span class="n">end</span>
  <span class="n">local</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="k">for</span> <span class="n">_</span> <span class="n">in</span> <span class="n">pairs</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="k">do</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">t</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">nil</span> <span class="n">then</span> <span class="k">return</span> <span class="nb">false</span> <span class="n">end</span>
  <span class="n">end</span>
  <span class="k">return</span> <span class="nb">true</span>
<span class="n">end</span>

<span class="n">local</span> <span class="n">function</span> <span class="n">table_is_map</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">type</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">~=</span> <span class="s">&#34;table&#34;</span> <span class="n">then</span> <span class="k">return</span> <span class="nb">false</span> <span class="n">end</span>
  <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">_</span> <span class="n">in</span> <span class="n">pairs</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="k">do</span>
    <span class="k">if</span> <span class="n">type</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="o">==</span> <span class="s">&#34;number&#34;</span> <span class="n">then</span>  <span class="k">return</span> <span class="nb">false</span> <span class="n">end</span>
  <span class="n">end</span>
  <span class="k">return</span> <span class="nb">true</span>
<span class="n">end</span>
</code></pre>
</div>



                <hr/>

                
                
                
                <div class="ds-share" style="text-align: right" data-thread-key="/2015/11/23/lua_table" data-title="Lua table 学习笔记" data-url="http://hooting.github.io/2015/11/23/lua_table/" data-images="http://hooting.github.io/img/post-bg-2015.jpg" data-content="Lua table定义
table类型实现了“关联数组”。“关联数组” 是一种具有特殊索引方式的数组，索引可为字符串string或(整)数number类型... | Hooting Blog ">
                    
                <hr/>
                </div>