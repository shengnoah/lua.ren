---
layout: post
title: 百日百行计划:4  (Evaluate) 
tags: [lua文章]
categories: [topic]
---
<h3 id="这一次我们使用Stack来做点事情"><a href="#这一次我们使用Stack来做点事情" class="headerlink" title="这一次我们使用Stack来做点事情"></a>这一次我们使用Stack来做点事情</h3><p>我们的目的是使用两个堆栈实现一个求值算法，能够计算一些类似”(1+ ( 2<em> 3 ) </em> 5)”的算数表达式字符串的值</p>
<h3 id="代码如下"><a href="#代码如下" class="headerlink" title="代码如下"></a>代码如下</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">import</span> edu.princeton.cs.algs4.StdIn;</div><div class="line"><span class="keyword">import</span> edu.princeton.cs.algs4.StdOut;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.util.Stack;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span>  </span>{</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</div><div class="line">        Stack&lt;String&gt; ops=<span class="keyword">new</span> Stack&lt;String&gt;();</div><div class="line">        Stack&lt;Double&gt; vals=<span class="keyword">new</span> Stack&lt;Double&gt;();</div><div class="line">        </div><div class="line">        <span class="keyword">while</span>(!StdIn.isEmpty())</div><div class="line">        {</div><div class="line">            String s= StdIn.readString();</div><div class="line">            <span class="comment">//读取String</span></div><div class="line">            <span class="comment">//先处理各种操作符的情形</span></div><div class="line">            <span class="keyword">if</span>(s.equals(<span class="string">&#34;(&#34;</span>))   ;</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(s.equals(<span class="string">&#34;+&#34;</span>))  ops.push(s);</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(s.equals(<span class="string">&#34;-&#34;</span>))  ops.push(s);</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(s.equals(<span class="string">&#34;*&#34;</span>))  ops.push(s);</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(s.equals(<span class="string">&#34;/&#34;</span>))  ops.push(s);</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(s.equals(<span class="string">&#34;sqrt&#34;</span>)) ops.push(s);</div><div class="line">            </div><div class="line">            <span class="comment">//右括号则弹出，进行计算</span></div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(s.equals(<span class="string">&#34;)&#34;</span>))</div><div class="line">            {</div><div class="line">                String op=ops.pop();</div><div class="line">                <span class="keyword">double</span> v=vals.pop();</div><div class="line">                <span class="comment">//先从值堆栈中弹出一个</span></div><div class="line">                <span class="comment">//再从操作符堆栈中弹出一个进行判定</span></div><div class="line">                <span class="keyword">if</span>(op.equals(<span class="string">&#34;+&#34;</span>)) v=vals.pop()+v;</div><div class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(op.equals(<span class="string">&#34;-&#34;</span>)) v=vals.pop()-v;</div><div class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(op.equals(<span class="string">&#34;*&#34;</span>)) v=vals.pop()*v;</div><div class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(op.equals(<span class="string">&#34;/&#34;</span>)) v=vals.pop()/v;</div><div class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(op.equals(<span class="string">&#34;sqrt&#34;</span>)) v=Math.sqrt(v);</div><div class="line">                </div><div class="line">                <span class="comment">//就近处理掉外面的值，存如值堆栈等待新的处理</span></div><div class="line">                vals.push(v);</div><div class="line">            }</div><div class="line">            <span class="comment">//如果字符既不是运算符也不是括号，将它作为double值押入栈</span></div><div class="line">            <span class="keyword">else</span> vals.push(Double.parseDouble(s));</div><div class="line">        }</div><div class="line">        StdOut.println(vals.pop());</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></tbody></table></figure>
<p><strong><em>注意:我们使用的StdIn和StdOut都是&lt;&lt; algorightms &gt;&gt; 4th edition 提供的经过封装的输入输出类</em></strong></p>