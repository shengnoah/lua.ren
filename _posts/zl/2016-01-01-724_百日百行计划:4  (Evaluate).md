---
layout: post
title: 百日百行计划:4  (Evaluate) 
tags: [lua文章]
categories: [topic]
---
### 这一次我们使用Stack来做点事情

我们的目的是使用两个堆栈实现一个求值算法，能够计算一些类似”(1+ ( 2 _3 )_ 5)”的算数表达式字符串的值

### 代码如下

    
    
    1
    
    2
    
    3
    
    4
    
    5
    
    6
    
    7
    
    8
    
    9
    
    10
    
    11
    
    12
    
    13
    
    14
    
    15
    
    16
    
    17
    
    18
    
    19
    
    20
    
    21
    
    22
    
    23
    
    24
    
    25
    
    26
    
    27
    
    28
    
    29
    
    30
    
    31
    
    32
    
    33
    
    34
    
    35
    
    36
    
    37
    
    38
    
    39
    
    40
    
    41
    
    42
    
    43
    
    44
    
    45
    
    46

|

    
    
    import edu.princeton.cs.algs4.StdIn;
    
    import edu.princeton.cs.algs4.StdOut;
    
    import java.util.Stack;
    
    public class  {
    
        public static void main(String[] args) {
    
            Stack<String> ops=new Stack<String>();
    
            Stack<Double> vals=new Stack<Double>();
    
            
    
            while(!StdIn.isEmpty())
    
            {
    
                String s= StdIn.readString();
    
                //读取String
    
                //先处理各种操作符的情形
    
                if(s.equals("("))   ;
    
                else if(s.equals("+"))  ops.push(s);
    
                else if(s.equals("-"))  ops.push(s);
    
                else if(s.equals("*"))  ops.push(s);
    
                else if(s.equals("/"))  ops.push(s);
    
                else if(s.equals("sqrt")) ops.push(s);
    
                
    
                //右括号则弹出，进行计算
    
                else if(s.equals(")"))
    
                {
    
                    String op=ops.pop();
    
                    double v=vals.pop();
    
                    //先从值堆栈中弹出一个
    
                    //再从操作符堆栈中弹出一个进行判定
    
                    if(op.equals("+")) v=vals.pop()+v;
    
                    else if(op.equals("-")) v=vals.pop()-v;
    
                    else if(op.equals("*")) v=vals.pop()*v;
    
                    else if(op.equals("/")) v=vals.pop()/v;
    
                    else if(op.equals("sqrt")) v=Math.sqrt(v);
    
                    
    
                    //就近处理掉外面的值，存如值堆栈等待新的处理
    
                    vals.push(v);
    
                }
    
                //如果字符既不是运算符也不是括号，将它作为double值押入栈
    
                else vals.push(Double.parseDouble(s));
    
            }
    
            StdOut.println(vals.pop());
    
        }
    
    }  
  
---|---  
  
**_注意:我们使用的StdIn和StdOut都是 << algorightms >> 4th edition 提供的经过封装的输入输出类_**