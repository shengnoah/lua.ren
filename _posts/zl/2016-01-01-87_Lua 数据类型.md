---
layout: post
title: Lua 数据类型 
tags: [lua文章]
categories: [topic]
---
数据类型 | 描述  
---|---  
nil | 这个最简单，只有值nil属于该类，表示一个无效值（在条件表达式中相当于false）。  
boolean | 包含两个值：false和true。  
number | 表示双精度类型的实浮点数  
string | 字符串由一对双引号或单引号来表示  
function | 由 C 或 Lua 编写的函数  
userdata  | 表示任意存储在变量中的C数据结构  
thread | 表示执行的独立线路，用于执行协同程序  
table | Lua 中的表（table）其实是一个”关联数组”（associative arrays），数组的索引可以是数字或者是字符串。在 Lua
里，table 的创建是通过”构造表达式”来完成，最简单构造表达式是{}，用来创建一个空表。  
  
* * *

## nil#

  * nil 类型表示一种没有任何有效值，它只有一个值 – nil
  * 对于全局变量和 table，nil 还有一个”删除”作用，给全局变量或者 table 表里的变量赋一个 nil 值，等同于把它们删掉.

* * *

## boolean#

  * boolean 类型只有两个可选值：true（真） 和 false（假）
  * Lua 把 false 和 nil 看作是”假”，其他的都为”真”:

    
    
    1  
    2  
    3  
    4  
    5  
    

|

    
    
    if false or nil then  
        print("至少有一个是 true")  
    else  
        print("false 和 nil 都为 false!")  
    end  
      
  
---|---  
  
* _以上代码执行结果如下_
    
    
    1  
    2  
    

|

    
    
    false 和 nil 都为 false!  
    [Finished in 0.0s]  
      
  
---|---  
  
* * *

## number#

  * Lua 默认只有一种 number 类型 – double（双精度）类型（默认类型可以修改 luaconf.h 里的定义）

* * *

## string#

  * 字符串由一对双引号或单引号来表示。

    
    
    1  
    2  
    

|

    
    
    string1 = "this is string1"  
    string2 = 'this is string2'  
      
  
---|---  
  
  * 也可以用 2 个方括号 “[[]]” 来表示”一块”字符串。

    
    
    1  
    2  
    3  
    

|

    
    
    html = [[  
    There are many words  
    ]]  
      
  
---|---  
  
  * 在对一个数字字符串上进行算术操作时，Lua 会尝试将这个数字字符串转成一个数字，如：

    
    
    1  
    2  
    3  
    4  
    5  
    6  
    7  
    8  
    

|

    
    
    > print("2" + 6)  
    8.0  
    > print("2" + "6")  
    8.0  
    > print("2 + 6")  
    2 + 6  
    > print("-2e2" * "6")  
    -1200.0  
      
  
---|---  
  
  * 字符串连接使用的是 .. ，如：

    
    
    1  
    2  
    3  
    4  
    

|

    
    
    > print("a" .. 'b')  
    ab  
    > print(157 .. 428)  
    157428  
      
  
---|---  
  
  * 使用 # 来计算字符串的长度，放在字符串前面，如：

    
    
    1  
    2  
    3  
    

|

    
    
    > len = "https://freshwlnd.github.io/"  
    > print(#len)  
    28  
      
  
---|---  
  
* * *

## table#

  * 在 Lua 里，table 的创建是通过”构造表达式”来完成，最简单构造表达式是{}，用来创建一个空表。也可以在表里添加一些数据，直接初始化表:

    
    
    1  
    2  
    3  
    

|

    
    
    -- 创建一个空的 table  
    table1 = {}  
    table2 = {'a'}  
      
  
---|---  
  
  * Lua 中的表（table）其实是一个”关联数组”（associative arrays），数组的索引可以是数字或者是字符串:

    
    
    1  
    2  
    3  
    4  
    5  
    6  
    7  
    8  
    9  
    10  
    11  
    12  
    13  
    14  
    

|

    
    
    -- table.lua  
      
    -- 1  
    table1 = {1,3,4,5,6}  
    print(table1[3])  
    print()  
      
    -- 2  
    table2 = {}  
    table2['a'] = 'b'  
    table2[1] = 2  
    for k,v in pairs(table2) do  
    	print(k..' : '..v)  
    end  
      
  
---|---  
  
  * 脚本执行结果为：

    
    
    1  
    2  
    3  
    4  
    5  
    

|

    
    
    4  
      
    1 : 2  
    a : b  
    [Finished in 0.0s]  
      
  
---|---  
  
  * 不同于其他语言的数组把 0 作为数组的初始索引，在 Lua 里表的默认初始索引一般以 1 开始:

    
    
    1  
    2  
    3  
    4  
    5  
    6  
    

|

    
    
    -- table.lua  
      
    table = {1,2,3,4,5}  
    for k,v in pairs(table) do  
    	print(k..' : '..v)  
    end  
      
  
---|---  
  
  * 脚本执行结果为：

    
    
    1  
    2  
    3  
    4  
    5  
    6  
    

|

    
    
    1 : 1  
    2 : 2  
    3 : 3  
    4 : 4  
    5 : 5  
    [Finished in 0.0s]  
      
  
---|---  
  
  * table 不会固定长度大小，有新数据添加时 table 长度会自动增长，没初始的 table 都是 nil:

    
    
    1  
    2  
    3  
    4  
    5  
    6  
    7  
    8  
    

|

    
    
    -- table.lua  
      
    table = {}  
    table[1] = 'a'  
    table[2] = 'b'  
    for i=1,3 do  
    	print(table[i])  
    end  
      
  
---|---  
  
  * 脚本执行结果为：

    
    
    1  
    2  
    3  
    4  
    

|

    
    
    a  
    b  
    nil  
    [Finished in 0.0s]  
      
  
---|---  
  
* * *

## function#

  * 在 Lua 中，函数是被看作是”第一类值（First-Class Value）”，函数可以存在变量里:

    
    
    1  
    2  
    3  
    4  
    5  
    6  
    7  
    8  
    9  
    10  
    11  
    

|

    
    
    -- function.lua  
    function factorial1(n)  
        if n == 0 then  
            return 1  
        else  
            return n * factorial1(n - 1)  
        end  
    end  
    print(factorial1(5))  
    factorial2 = factorial1  
    print(factorial2(5))  
      
  
---|---  
  
  * 脚本执行结果为：

    
    
    1  
    2  
    3  
    

|

    
    
    120  
    120  
    [Finished in 0.0s]  
      
  
---|---  
  
  * function 可以以匿名函数（anonymous function）的方式通过参数传递:

    
    
    1  
    2  
    3  
    4  
    5  
    6  
    7  
    8  
    9  
    10  
    11  
    12  
    13  
    14  
    

|

    
    
    -- function2.lua  
    function testFun(tab,fun)  
        for k ,v in pairs(tab) do  
            print(fun(k,v));  
        end  
    end  
      
      
    tab={key1="val1",key2="val2"};  
    testFun(tab,  
    function(key,val)--匿名函数  
        return key.."="..val;  
    end  
    );  
      
  
---|---  
  
  * 脚本执行结果为：

    
    
    1  
    2  
    3  
    

|

    
    
    key1=val1  
    key2=val2  
    [Finished in 0.0s]  
      
  
---|---  
  
* * *

## userdata（自定义类型）#

  * userdata 是一种用户自定义数据，用于表示一种由应用程序或 C/C++ 语言库所创建的类型，可以将任意 C/C++ 的任意数据类型的数据（通常是 struct 和 指针）存储到 Lua 变量中调用。

* * *

> 在最后，必须感谢[菜鸟教程](www.runoob.com)的教程